/* SearchView.c generated by valac 0.50.1, the Vala compiler
 * generated from SearchView.vala, do not modify */

/* -*- Mode: vala; indent-tabs-mode: nil; tab-width: 4 -*-*/
/**/
/*  Copyright (C) 2011-2012 Giulio Collura*/
/**/
/*  This program is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  This program is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <gtk/gtk.h>
#include <glib-object.h>
#include <glib.h>
#include <gee.h>
#include <stdlib.h>
#include <string.h>
#include <gdk/gdk.h>
#include <glib/gi18n-lib.h>
#include <gio/gio.h>
#include <float.h>
#include <math.h>
#include <cairo-gobject.h>

#define ROCKER_WIDGETS_TYPE_SEARCH_VIEW (rocker_widgets_search_view_get_type ())
#define ROCKER_WIDGETS_SEARCH_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ROCKER_WIDGETS_TYPE_SEARCH_VIEW, RockerWidgetsSearchView))
#define ROCKER_WIDGETS_SEARCH_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ROCKER_WIDGETS_TYPE_SEARCH_VIEW, RockerWidgetsSearchViewClass))
#define ROCKER_WIDGETS_IS_SEARCH_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ROCKER_WIDGETS_TYPE_SEARCH_VIEW))
#define ROCKER_WIDGETS_IS_SEARCH_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ROCKER_WIDGETS_TYPE_SEARCH_VIEW))
#define ROCKER_WIDGETS_SEARCH_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ROCKER_WIDGETS_TYPE_SEARCH_VIEW, RockerWidgetsSearchViewClass))

typedef struct _RockerWidgetsSearchView RockerWidgetsSearchView;
typedef struct _RockerWidgetsSearchViewClass RockerWidgetsSearchViewClass;
typedef struct _RockerWidgetsSearchViewPrivate RockerWidgetsSearchViewPrivate;

#define ROCKER_BACKEND_TYPE_APP (rocker_backend_app_get_type ())
#define ROCKER_BACKEND_APP(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ROCKER_BACKEND_TYPE_APP, RockerBackendApp))
#define ROCKER_BACKEND_APP_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ROCKER_BACKEND_TYPE_APP, RockerBackendAppClass))
#define ROCKER_BACKEND_IS_APP(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ROCKER_BACKEND_TYPE_APP))
#define ROCKER_BACKEND_IS_APP_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ROCKER_BACKEND_TYPE_APP))
#define ROCKER_BACKEND_APP_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ROCKER_BACKEND_TYPE_APP, RockerBackendAppClass))

typedef struct _RockerBackendApp RockerBackendApp;
typedef struct _RockerBackendAppClass RockerBackendAppClass;

#define ROCKER_WIDGETS_TYPE_SEARCH_ITEM (rocker_widgets_search_item_get_type ())
#define ROCKER_WIDGETS_SEARCH_ITEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ROCKER_WIDGETS_TYPE_SEARCH_ITEM, RockerWidgetsSearchItem))
#define ROCKER_WIDGETS_SEARCH_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ROCKER_WIDGETS_TYPE_SEARCH_ITEM, RockerWidgetsSearchItemClass))
#define ROCKER_WIDGETS_IS_SEARCH_ITEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ROCKER_WIDGETS_TYPE_SEARCH_ITEM))
#define ROCKER_WIDGETS_IS_SEARCH_ITEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ROCKER_WIDGETS_TYPE_SEARCH_ITEM))
#define ROCKER_WIDGETS_SEARCH_ITEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ROCKER_WIDGETS_TYPE_SEARCH_ITEM, RockerWidgetsSearchItemClass))

typedef struct _RockerWidgetsSearchItem RockerWidgetsSearchItem;
typedef struct _RockerWidgetsSearchItemClass RockerWidgetsSearchItemClass;

#define ROCKER_TYPE_ROCKER_VIEW (rocker_rocker_view_get_type ())
#define ROCKER_ROCKER_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ROCKER_TYPE_ROCKER_VIEW, RockerRockerView))
#define ROCKER_ROCKER_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ROCKER_TYPE_ROCKER_VIEW, RockerRockerViewClass))
#define ROCKER_IS_ROCKER_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ROCKER_TYPE_ROCKER_VIEW))
#define ROCKER_IS_ROCKER_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ROCKER_TYPE_ROCKER_VIEW))
#define ROCKER_ROCKER_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ROCKER_TYPE_ROCKER_VIEW, RockerRockerViewClass))

typedef struct _RockerRockerView RockerRockerView;
typedef struct _RockerRockerViewClass RockerRockerViewClass;
enum  {
	ROCKER_WIDGETS_SEARCH_VIEW_0_PROPERTY,
	ROCKER_WIDGETS_SEARCH_VIEW_IN_CONTEXT_VIEW_PROPERTY,
	ROCKER_WIDGETS_SEARCH_VIEW_SELECTED_PROPERTY,
	ROCKER_WIDGETS_SEARCH_VIEW_CONTEXT_SELECTED_PROPERTY,
	ROCKER_WIDGETS_SEARCH_VIEW_NUM_PROPERTIES
};
static GParamSpec* rocker_widgets_search_view_properties[ROCKER_WIDGETS_SEARCH_VIEW_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
typedef struct _Block7Data Block7Data;
typedef struct _RockerRockerViewPrivate RockerRockerViewPrivate;

#define ROCKER_TYPE_SELECTOR (rocker_selector_get_type ())
#define ROCKER_SELECTOR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ROCKER_TYPE_SELECTOR, RockerSelector))
#define ROCKER_SELECTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ROCKER_TYPE_SELECTOR, RockerSelectorClass))
#define ROCKER_IS_SELECTOR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ROCKER_TYPE_SELECTOR))
#define ROCKER_IS_SELECTOR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ROCKER_TYPE_SELECTOR))
#define ROCKER_SELECTOR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ROCKER_TYPE_SELECTOR, RockerSelectorClass))

typedef struct _RockerSelector RockerSelector;
typedef struct _RockerSelectorClass RockerSelectorClass;

#define ROCKER_BACKEND_TYPE_APP_SYSTEM (rocker_backend_app_system_get_type ())
#define ROCKER_BACKEND_APP_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ROCKER_BACKEND_TYPE_APP_SYSTEM, RockerBackendAppSystem))
#define ROCKER_BACKEND_APP_SYSTEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ROCKER_BACKEND_TYPE_APP_SYSTEM, RockerBackendAppSystemClass))
#define ROCKER_BACKEND_IS_APP_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ROCKER_BACKEND_TYPE_APP_SYSTEM))
#define ROCKER_BACKEND_IS_APP_SYSTEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ROCKER_BACKEND_TYPE_APP_SYSTEM))
#define ROCKER_BACKEND_APP_SYSTEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ROCKER_BACKEND_TYPE_APP_SYSTEM, RockerBackendAppSystemClass))

typedef struct _RockerBackendAppSystem RockerBackendAppSystem;
typedef struct _RockerBackendAppSystemClass RockerBackendAppSystemClass;

#define SYNAPSE_TYPE_MATCH (synapse_match_get_type ())
#define SYNAPSE_MATCH(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SYNAPSE_TYPE_MATCH, SynapseMatch))
#define SYNAPSE_IS_MATCH(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SYNAPSE_TYPE_MATCH))
#define SYNAPSE_MATCH_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), SYNAPSE_TYPE_MATCH, SynapseMatchIface))

typedef struct _SynapseMatch SynapseMatch;
typedef struct _SynapseMatchIface SynapseMatchIface;
typedef enum  {
	SYNAPSE_QUERY_FLAGS_INCLUDE_REMOTE = 1 << 0,
	SYNAPSE_QUERY_FLAGS_UNCATEGORIZED = 1 << 1,
	SYNAPSE_QUERY_FLAGS_APPLICATIONS = 1 << 2,
	SYNAPSE_QUERY_FLAGS_ACTIONS = 1 << 3,
	SYNAPSE_QUERY_FLAGS_AUDIO = 1 << 4,
	SYNAPSE_QUERY_FLAGS_VIDEO = 1 << 5,
	SYNAPSE_QUERY_FLAGS_DOCUMENTS = 1 << 6,
	SYNAPSE_QUERY_FLAGS_IMAGES = 1 << 7,
	SYNAPSE_QUERY_FLAGS_FILES = ((SYNAPSE_QUERY_FLAGS_AUDIO | SYNAPSE_QUERY_FLAGS_VIDEO) | SYNAPSE_QUERY_FLAGS_DOCUMENTS) | SYNAPSE_QUERY_FLAGS_IMAGES,
	SYNAPSE_QUERY_FLAGS_PLACES = 1 << 8,
	SYNAPSE_QUERY_FLAGS_INTERNET = 1 << 9,
	SYNAPSE_QUERY_FLAGS_TEXT = 1 << 10,
	SYNAPSE_QUERY_FLAGS_CONTACTS = 1 << 11,
	SYNAPSE_QUERY_FLAGS_ALL = 0xFFFFFFFFLL,
	SYNAPSE_QUERY_FLAGS_LOCAL_CONTENT = SYNAPSE_QUERY_FLAGS_ALL ^ SYNAPSE_QUERY_FLAGS_INCLUDE_REMOTE
} SynapseQueryFlags;

#define SYNAPSE_TYPE_QUERY_FLAGS (synapse_query_flags_get_type ())
typedef enum  {
	SYNAPSE_MATCH_TYPE_UNKNOWN = 0,
	SYNAPSE_MATCH_TYPE_TEXT,
	SYNAPSE_MATCH_TYPE_APPLICATION,
	SYNAPSE_MATCH_TYPE_GENERIC_URI,
	SYNAPSE_MATCH_TYPE_ACTION,
	SYNAPSE_MATCH_TYPE_SEARCH,
	SYNAPSE_MATCH_TYPE_CONTACT
} SynapseMatchType;

#define SYNAPSE_TYPE_MATCH_TYPE (synapse_match_type_get_type ())

#define SYNAPSE_TYPE_URI_MATCH (synapse_uri_match_get_type ())
#define SYNAPSE_URI_MATCH(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SYNAPSE_TYPE_URI_MATCH, SynapseUriMatch))
#define SYNAPSE_IS_URI_MATCH(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SYNAPSE_TYPE_URI_MATCH))
#define SYNAPSE_URI_MATCH_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), SYNAPSE_TYPE_URI_MATCH, SynapseUriMatchIface))

typedef struct _SynapseUriMatch SynapseUriMatch;
typedef struct _SynapseUriMatchIface SynapseUriMatchIface;
#define _g_free0(var) (var = (g_free (var), NULL))

#define SYNAPSE_DESKTOP_FILE_PLUGIN_TYPE_ACTION_MATCH (synapse_desktop_file_plugin_action_match_get_type ())
#define SYNAPSE_DESKTOP_FILE_PLUGIN_ACTION_MATCH(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SYNAPSE_DESKTOP_FILE_PLUGIN_TYPE_ACTION_MATCH, SynapseDesktopFilePluginActionMatch))
#define SYNAPSE_DESKTOP_FILE_PLUGIN_ACTION_MATCH_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SYNAPSE_DESKTOP_FILE_PLUGIN_TYPE_ACTION_MATCH, SynapseDesktopFilePluginActionMatchClass))
#define SYNAPSE_DESKTOP_FILE_PLUGIN_IS_ACTION_MATCH(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SYNAPSE_DESKTOP_FILE_PLUGIN_TYPE_ACTION_MATCH))
#define SYNAPSE_DESKTOP_FILE_PLUGIN_IS_ACTION_MATCH_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SYNAPSE_DESKTOP_FILE_PLUGIN_TYPE_ACTION_MATCH))
#define SYNAPSE_DESKTOP_FILE_PLUGIN_ACTION_MATCH_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SYNAPSE_DESKTOP_FILE_PLUGIN_TYPE_ACTION_MATCH, SynapseDesktopFilePluginActionMatchClass))

typedef struct _SynapseDesktopFilePluginActionMatch SynapseDesktopFilePluginActionMatch;
typedef struct _SynapseDesktopFilePluginActionMatchClass SynapseDesktopFilePluginActionMatchClass;
#define _g_hash_table_unref0(var) ((var == NULL) ? NULL : (var = (g_hash_table_unref (var), NULL)))
typedef struct _Block8Data Block8Data;

#define SYNAPSE_TYPE_SEARCH_MATCH (synapse_search_match_get_type ())
#define SYNAPSE_SEARCH_MATCH(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SYNAPSE_TYPE_SEARCH_MATCH, SynapseSearchMatch))
#define SYNAPSE_IS_SEARCH_MATCH(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SYNAPSE_TYPE_SEARCH_MATCH))
#define SYNAPSE_SEARCH_MATCH_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), SYNAPSE_TYPE_SEARCH_MATCH, SynapseSearchMatchIface))

typedef struct _SynapseSearchMatch SynapseSearchMatch;
typedef struct _SynapseSearchMatchIface SynapseSearchMatchIface;

#define SYNAPSE_TYPE_SEARCH_PROVIDER (synapse_search_provider_get_type ())
#define SYNAPSE_SEARCH_PROVIDER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SYNAPSE_TYPE_SEARCH_PROVIDER, SynapseSearchProvider))
#define SYNAPSE_IS_SEARCH_PROVIDER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SYNAPSE_TYPE_SEARCH_PROVIDER))
#define SYNAPSE_SEARCH_PROVIDER_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), SYNAPSE_TYPE_SEARCH_PROVIDER, SynapseSearchProviderIface))

typedef struct _SynapseSearchProvider SynapseSearchProvider;
typedef struct _SynapseSearchProviderIface SynapseSearchProviderIface;

#define SYNAPSE_TYPE_RESULT_SET (synapse_result_set_get_type ())
#define SYNAPSE_RESULT_SET(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SYNAPSE_TYPE_RESULT_SET, SynapseResultSet))
#define SYNAPSE_RESULT_SET_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SYNAPSE_TYPE_RESULT_SET, SynapseResultSetClass))
#define SYNAPSE_IS_RESULT_SET(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SYNAPSE_TYPE_RESULT_SET))
#define SYNAPSE_IS_RESULT_SET_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SYNAPSE_TYPE_RESULT_SET))
#define SYNAPSE_RESULT_SET_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SYNAPSE_TYPE_RESULT_SET, SynapseResultSetClass))

typedef struct _SynapseResultSet SynapseResultSet;
typedef struct _SynapseResultSetClass SynapseResultSetClass;
typedef struct _RockerWidgetsSearchItemPrivate RockerWidgetsSearchItemPrivate;
typedef struct _Block9Data Block9Data;
enum  {
	ROCKER_WIDGETS_SEARCH_VIEW_START_SEARCH_SIGNAL,
	ROCKER_WIDGETS_SEARCH_VIEW_APP_LAUNCHED_SIGNAL,
	ROCKER_WIDGETS_SEARCH_VIEW_NUM_SIGNALS
};
static guint rocker_widgets_search_view_signals[ROCKER_WIDGETS_SEARCH_VIEW_NUM_SIGNALS] = {0};

struct _RockerWidgetsSearchView {
	GtkScrolledWindow parent_instance;
	RockerWidgetsSearchViewPrivate * priv;
};

struct _RockerWidgetsSearchViewClass {
	GtkScrolledWindowClass parent_class;
};

struct _RockerWidgetsSearchViewPrivate {
	gboolean _in_context_view;
	GeeHashMap* items;
	RockerWidgetsSearchItem* selected_app;
	GtkBox* main_box;
	GtkBox* context_box;
	GtkFixed* context_fixed;
	gint context_selected_y;
	gint n_results;
	gint _selected;
	gint _context_selected;
	RockerRockerView* view;
};

struct _Block7Data {
	int _ref_count_;
	RockerWidgetsSearchView* self;
	RockerRockerView* parent;
};

struct _RockerRockerView {
	GtkWindow parent_instance;
	RockerRockerViewPrivate * priv;
	GtkSearchEntry* search_entry;
	GtkStack* stack;
	RockerSelector* view_selector;
	GtkGrid* top;
	GtkGrid* container;
	GtkFrame* fcontainer;
	GtkStack* main_stack;
	GtkBox* content_area;
	RockerBackendAppSystem* app_system;
	GeeHashMap* apps;
	GeeArrayList* saved_apps;
	GSList* app_name;
};

struct _RockerRockerViewClass {
	GtkWindowClass parent_class;
};

struct _SynapseMatchIface {
	GTypeInterface parent_iface;
	void (*execute) (SynapseMatch* self, SynapseMatch* match);
	void (*execute_with_target) (SynapseMatch* self, SynapseMatch* source, SynapseMatch* target);
	gboolean (*needs_target) (SynapseMatch* self);
	SynapseQueryFlags (*target_flags) (SynapseMatch* self);
	const gchar* (*get_title) (SynapseMatch* self);
	void (*set_title) (SynapseMatch* self, const gchar* value);
	const gchar* (*get_description) (SynapseMatch* self);
	void (*set_description) (SynapseMatch* self, const gchar* value);
	const gchar* (*get_icon_name) (SynapseMatch* self);
	void (*set_icon_name) (SynapseMatch* self, const gchar* value);
	gboolean (*get_has_thumbnail) (SynapseMatch* self);
	void (*set_has_thumbnail) (SynapseMatch* self, gboolean value);
	const gchar* (*get_thumbnail_path) (SynapseMatch* self);
	void (*set_thumbnail_path) (SynapseMatch* self, const gchar* value);
	SynapseMatchType (*get_match_type) (SynapseMatch* self);
	void (*set_match_type) (SynapseMatch* self, SynapseMatchType value);
};

struct _SynapseUriMatchIface {
	GTypeInterface parent_iface;
	const gchar* (*get_uri) (SynapseUriMatch* self);
	void (*set_uri) (SynapseUriMatch* self, const gchar* value);
	SynapseQueryFlags (*get_file_type) (SynapseUriMatch* self);
	void (*set_file_type) (SynapseUriMatch* self, SynapseQueryFlags value);
	const gchar* (*get_mime_type) (SynapseUriMatch* self);
	void (*set_mime_type) (SynapseUriMatch* self, const gchar* value);
};

struct _Block8Data {
	int _ref_count_;
	RockerWidgetsSearchView* self;
	RockerWidgetsSearchItem* search_item;
	RockerBackendApp* app;
};

typedef enum  {
	SYNAPSE_SEARCH_ERROR_SEARCH_CANCELLED,
	SYNAPSE_SEARCH_ERROR_UNKNOWN_ERROR
} SynapseSearchError;
#define SYNAPSE_SEARCH_ERROR synapse_search_error_quark ()
struct _SynapseSearchProviderIface {
	GTypeInterface parent_iface;
	void (*search) (SynapseSearchProvider* self, const gchar* query, SynapseQueryFlags flags, SynapseResultSet* dest_result_set, GCancellable* cancellable, GAsyncReadyCallback _callback_, gpointer _user_data_);
	GeeList* (*search_finish) (SynapseSearchProvider* self, GAsyncResult* _res_, GError** error);
};

struct _SynapseSearchMatchIface {
	GTypeInterface parent_iface;
	SynapseMatch* (*get_search_source) (SynapseSearchMatch* self);
	void (*set_search_source) (SynapseSearchMatch* self, SynapseMatch* value);
};

struct _RockerWidgetsSearchItem {
	GtkButton parent_instance;
	RockerWidgetsSearchItemPrivate * priv;
	gboolean dragging;
	gboolean action;
};

struct _RockerWidgetsSearchItemClass {
	GtkButtonClass parent_class;
};

struct _Block9Data {
	int _ref_count_;
	RockerWidgetsSearchView* self;
	RockerWidgetsSearchItem* search_item;
	RockerBackendApp* app;
};

static gint RockerWidgetsSearchView_private_offset;
static gpointer rocker_widgets_search_view_parent_class = NULL;

GType rocker_widgets_search_view_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (RockerWidgetsSearchView, g_object_unref)
GType rocker_backend_app_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (RockerBackendApp, g_object_unref)
GType rocker_widgets_search_item_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (RockerWidgetsSearchItem, g_object_unref)
GType rocker_rocker_view_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (RockerRockerView, g_object_unref)
#define ROCKER_WIDGETS_SEARCH_VIEW_MAX_RESULTS 20
#define ROCKER_WIDGETS_SEARCH_VIEW_MAX_RESULTS_BEFORE_LIMIT 10
RockerWidgetsSearchView* rocker_widgets_search_view_new (RockerRockerView* parent);
RockerWidgetsSearchView* rocker_widgets_search_view_construct (GType object_type,
                                                               RockerRockerView* parent);
static Block7Data* block7_data_ref (Block7Data* _data7_);
static void block7_data_unref (void * _userdata_);
GType rocker_selector_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (RockerSelector, g_object_unref)
GType rocker_backend_app_system_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (RockerBackendAppSystem, g_object_unref)
static gboolean __lambda44_ (Block7Data* _data7_,
                      GdkEventKey* e);
static gboolean ___lambda44__gtk_widget_key_press_event (GtkWidget* _sender,
                                                  GdkEventKey* event,
                                                  gpointer self);
GType synapse_query_flags_get_type (void) G_GNUC_CONST;
GType synapse_match_type_get_type (void) G_GNUC_CONST;
GType synapse_match_get_type (void) G_GNUC_CONST;
void rocker_widgets_search_view_set_results (RockerWidgetsSearchView* self,
                                             GeeList* matches,
                                             const gchar* search_term);
static void _g_object_unref0_ (gpointer var);
SynapseMatchType synapse_match_get_match_type (SynapseMatch* self);
GType synapse_uri_match_get_type (void) G_GNUC_CONST;
const gchar* synapse_uri_match_get_uri (SynapseUriMatch* self);
GType synapse_desktop_file_plugin_action_match_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (SynapseDesktopFilePluginActionMatch, g_object_unref)
void rocker_widgets_search_view_clear (RockerWidgetsSearchView* self);
gint rocker_widgets_search_view_get_selected (RockerWidgetsSearchView* self);
static void rocker_widgets_search_view_show_action (RockerWidgetsSearchView* self,
                                             RockerBackendApp* app);
RockerBackendApp* rocker_backend_app_new_from_synapse_match (SynapseMatch* match,
                                                             SynapseMatch* target);
RockerBackendApp* rocker_backend_app_construct_from_synapse_match (GType object_type,
                                                                   SynapseMatch* match,
                                                                   SynapseMatch* target);
GeeList* rocker_backend_synapse_search_find_actions_for_match (SynapseMatch* match);
static void rocker_widgets_search_view_show_app (RockerWidgetsSearchView* self,
                                          RockerBackendApp* app,
                                          const gchar* search_term);
void rocker_widgets_search_view_set_selected (RockerWidgetsSearchView* self,
                                              gint value);
static Block8Data* block8_data_ref (Block8Data* _data8_);
static void block8_data_unref (void * _userdata_);
RockerWidgetsSearchItem* rocker_widgets_search_item_new (RockerBackendApp* app,
                                                         const gchar* search_term,
                                                         gboolean action,
                                                         const gchar* action_title);
RockerWidgetsSearchItem* rocker_widgets_search_item_construct (GType object_type,
                                                               RockerBackendApp* app,
                                                               const gchar* search_term,
                                                               gboolean action,
                                                               const gchar* action_title);
GType synapse_result_set_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (SynapseResultSet, g_object_unref)
GQuark synapse_search_error_quark (void);
GType synapse_search_provider_get_type (void) G_GNUC_CONST;
GType synapse_search_match_get_type (void) G_GNUC_CONST;
static void __lambda48_ (RockerWidgetsSearchView* self,
                  SynapseSearchMatch* search,
                  SynapseMatch* target);
static void ___lambda48__rocker_backend_app_start_search (RockerBackendApp* _sender,
                                                   SynapseSearchMatch* search_match,
                                                   SynapseMatch* target,
                                                   gpointer self);
static gboolean __lambda49_ (Block8Data* _data8_);
gboolean rocker_backend_app_launch (RockerBackendApp* self);
static gboolean ___lambda49__gtk_widget_button_release_event (GtkWidget* _sender,
                                                       GdkEventButton* event,
                                                       gpointer self);
static Block9Data* block9_data_ref (Block9Data* _data9_);
static void block9_data_unref (void * _userdata_);
SynapseMatch* rocker_backend_app_get_match (RockerBackendApp* self);
const gchar* synapse_match_get_title (SynapseMatch* self);
static void __lambda46_ (RockerWidgetsSearchView* self,
                  SynapseSearchMatch* search,
                  SynapseMatch* target);
static void ___lambda46__rocker_backend_app_start_search (RockerBackendApp* _sender,
                                                   SynapseSearchMatch* search_match,
                                                   SynapseMatch* target,
                                                   gpointer self);
static gboolean __lambda47_ (Block9Data* _data9_);
void synapse_match_execute (SynapseMatch* self,
                            SynapseMatch* match);
static gboolean ___lambda47__gtk_widget_button_release_event (GtkWidget* _sender,
                                                       GdkEventButton* event,
                                                       gpointer self);
void rocker_widgets_search_view_toggle_context (RockerWidgetsSearchView* self,
                                                gboolean show);
gboolean rocker_widgets_search_view_get_in_context_view (RockerWidgetsSearchView* self);
RockerBackendApp* rocker_widgets_search_item_get_app (RockerWidgetsSearchItem* self);
static void rocker_widgets_search_view_set_in_context_view (RockerWidgetsSearchView* self,
                                                     gboolean value);
static void _____lambda45_ (RockerWidgetsSearchView* self,
                     SynapseSearchMatch* search,
                     SynapseMatch* target);
static void ______lambda45__rocker_backend_app_start_search (RockerBackendApp* _sender,
                                                      SynapseSearchMatch* search_match,
                                                      SynapseMatch* target,
                                                      gpointer self);
void rocker_widgets_search_view_set_context_selected (RockerWidgetsSearchView* self,
                                                      gint value);
void rocker_widgets_search_view_down (RockerWidgetsSearchView* self);
gint rocker_widgets_search_view_get_context_selected (RockerWidgetsSearchView* self);
void rocker_widgets_search_view_up (RockerWidgetsSearchView* self);
static void rocker_widgets_search_view_select_nth (RockerWidgetsSearchView* self,
                                            GtkBox* box,
                                            gint index);
static GtkWidget* rocker_widgets_search_view_get_nth_main_item (RockerWidgetsSearchView* self,
                                                         gint n);
gboolean rocker_widgets_search_view_launch_selected (RockerWidgetsSearchView* self);
static void g_cclosure_user_marshal_VOID__OBJECT_OBJECT (GClosure * closure,
                                                  GValue * return_value,
                                                  guint n_param_values,
                                                  const GValue * param_values,
                                                  gpointer invocation_hint,
                                                  gpointer marshal_data);
static void rocker_widgets_search_view_finalize (GObject * obj);
static GType rocker_widgets_search_view_get_type_once (void);
static void _vala_rocker_widgets_search_view_get_property (GObject * object,
                                                    guint property_id,
                                                    GValue * value,
                                                    GParamSpec * pspec);
static void _vala_rocker_widgets_search_view_set_property (GObject * object,
                                                    guint property_id,
                                                    const GValue * value,
                                                    GParamSpec * pspec);

static inline gpointer
rocker_widgets_search_view_get_instance_private (RockerWidgetsSearchView* self)
{
	return G_STRUCT_MEMBER_P (self, RockerWidgetsSearchView_private_offset);
}

static gpointer
_g_object_ref0 (gpointer self)
{
	return self ? g_object_ref (self) : NULL;
}

static Block7Data*
block7_data_ref (Block7Data* _data7_)
{
	g_atomic_int_inc (&_data7_->_ref_count_);
	return _data7_;
}

static void
block7_data_unref (void * _userdata_)
{
	Block7Data* _data7_;
	_data7_ = (Block7Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data7_->_ref_count_)) {
		RockerWidgetsSearchView* self;
		self = _data7_->self;
		_g_object_unref0 (_data7_->parent);
		_g_object_unref0 (self);
		g_slice_free (Block7Data, _data7_);
	}
}

static gboolean
__lambda44_ (Block7Data* _data7_,
             GdkEventKey* e)
{
	RockerWidgetsSearchView* self;
	GtkSearchEntry* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	gboolean result = FALSE;
	self = _data7_->self;
	g_return_val_if_fail (e != NULL, FALSE);
	_tmp0_ = _data7_->parent->search_entry;
	_tmp1_ = gtk_entry_get_text ((GtkEntry*) _tmp0_);
	_tmp2_ = _tmp1_;
	if (g_strcmp0 (_tmp2_, "") == 0) {
		self->priv->_selected = 0;
	}
	result = FALSE;
	return result;
}

static gboolean
___lambda44__gtk_widget_key_press_event (GtkWidget* _sender,
                                         GdkEventKey* event,
                                         gpointer self)
{
	gboolean result;
	result = __lambda44_ (self, event);
	return result;
}

RockerWidgetsSearchView*
rocker_widgets_search_view_construct (GType object_type,
                                      RockerRockerView* parent)
{
	RockerWidgetsSearchView * self = NULL;
	Block7Data* _data7_;
	RockerRockerView* _tmp0_;
	RockerRockerView* _tmp1_;
	GeeHashMap* _tmp2_;
	GtkBox* _tmp3_;
	GtkBox* _tmp4_;
	GtkBox* _tmp5_;
	GtkFixed* _tmp6_;
	GtkFixed* _tmp7_;
	GtkFixed* _tmp8_;
	GtkBox* _tmp9_;
	GtkBox* box = NULL;
	GtkBox* _tmp10_;
	GtkBox* _tmp11_;
	GtkFixed* _tmp12_;
	GtkSearchEntry* _tmp13_;
	g_return_val_if_fail (parent != NULL, NULL);
	_data7_ = g_slice_new0 (Block7Data);
	_data7_->_ref_count_ = 1;
	_tmp0_ = _g_object_ref0 (parent);
	_g_object_unref0 (_data7_->parent);
	_data7_->parent = _tmp0_;
	self = (RockerWidgetsSearchView*) g_object_new (object_type, NULL);
	_data7_->self = g_object_ref (self);
	_tmp1_ = _g_object_ref0 (_data7_->parent);
	_g_object_unref0 (self->priv->view);
	self->priv->view = _tmp1_;
	g_object_set ((GtkScrolledWindow*) self, "hscrollbar-policy", GTK_POLICY_NEVER, NULL);
	_tmp2_ = gee_hash_map_new (ROCKER_BACKEND_TYPE_APP, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, ROCKER_WIDGETS_TYPE_SEARCH_ITEM, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
	_g_object_unref0 (self->priv->items);
	self->priv->items = _tmp2_;
	_tmp3_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 0);
	g_object_ref_sink (_tmp3_);
	_g_object_unref0 (self->priv->main_box);
	self->priv->main_box = _tmp3_;
	_tmp4_ = self->priv->main_box;
	gtk_widget_set_margin_start ((GtkWidget*) _tmp4_, 12);
	_tmp5_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_VERTICAL, 0);
	g_object_ref_sink (_tmp5_);
	_g_object_unref0 (self->priv->context_box);
	self->priv->context_box = _tmp5_;
	_tmp6_ = (GtkFixed*) gtk_fixed_new ();
	g_object_ref_sink (_tmp6_);
	_g_object_unref0 (self->priv->context_fixed);
	self->priv->context_fixed = _tmp6_;
	_tmp7_ = self->priv->context_fixed;
	gtk_widget_set_margin_start ((GtkWidget*) _tmp7_, 12);
	_tmp8_ = self->priv->context_fixed;
	_tmp9_ = self->priv->context_box;
	gtk_fixed_put (_tmp8_, (GtkWidget*) _tmp9_, 0, 0);
	_tmp10_ = (GtkBox*) gtk_box_new (GTK_ORIENTATION_HORIZONTAL, 0);
	g_object_ref_sink (_tmp10_);
	box = _tmp10_;
	_tmp11_ = self->priv->main_box;
	gtk_box_pack_start (box, (GtkWidget*) _tmp11_, TRUE, TRUE, (guint) 0);
	_tmp12_ = self->priv->context_fixed;
	gtk_box_pack_start (box, (GtkWidget*) _tmp12_, FALSE, TRUE, (guint) 0);
	gtk_scrolled_window_add_with_viewport ((GtkScrolledWindow*) self, (GtkWidget*) box);
	_tmp13_ = _data7_->parent->search_entry;
	g_signal_connect_data ((GtkWidget*) _tmp13_, "key-press-event", (GCallback) ___lambda44__gtk_widget_key_press_event, block7_data_ref (_data7_), (GClosureNotify) block7_data_unref, 0);
	_g_object_unref0 (box);
	block7_data_unref (_data7_);
	_data7_ = NULL;
	return self;
}

RockerWidgetsSearchView*
rocker_widgets_search_view_new (RockerRockerView* parent)
{
	return rocker_widgets_search_view_construct (ROCKER_WIDGETS_TYPE_SEARCH_VIEW, parent);
}

static void
_g_object_unref0_ (gpointer var)
{
	(var == NULL) ? NULL : (var = (g_object_unref (var), NULL));
}

void
rocker_widgets_search_view_set_results (RockerWidgetsSearchView* self,
                                        GeeList* matches,
                                        const gchar* search_term)
{
	GHashTable* categories = NULL;
	GHashTable* _tmp0_;
	GeeLinkedList* categories_order = NULL;
	GeeLinkedList* _tmp1_;
	gint limit = 0;
	gboolean _tmp34_ = FALSE;
	gint _tmp35_;
	gint _tmp36_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (matches != NULL);
	g_return_if_fail (search_term != NULL);
	_tmp0_ = g_hash_table_new_full (NULL, NULL, NULL, _g_object_unref0_);
	categories = _tmp0_;
	_tmp1_ = gee_linked_list_new (G_TYPE_INT, NULL, NULL, NULL, NULL, NULL);
	categories_order = _tmp1_;
	{
		GeeList* _match_list = NULL;
		GeeList* _tmp2_;
		gint _match_size = 0;
		GeeList* _tmp3_;
		gint _tmp4_;
		gint _tmp5_;
		gint _match_index = 0;
		_tmp2_ = _g_object_ref0 (matches);
		_match_list = _tmp2_;
		_tmp3_ = _match_list;
		_tmp4_ = gee_collection_get_size ((GeeCollection*) _tmp3_);
		_tmp5_ = _tmp4_;
		_match_size = _tmp5_;
		_match_index = -1;
		while (TRUE) {
			gint _tmp6_;
			gint _tmp7_;
			SynapseMatch* match = NULL;
			GeeList* _tmp8_;
			gpointer _tmp9_;
			GeeLinkedList* list = NULL;
			gint type = 0;
			SynapseMatch* _tmp10_;
			SynapseMatchType _tmp11_;
			SynapseMatchType _tmp12_;
			SynapseMatch* _tmp22_;
			GHashTable* _tmp23_;
			gconstpointer _tmp24_;
			GeeLinkedList* _tmp25_;
			GeeLinkedList* _tmp26_;
			GeeLinkedList* _tmp32_;
			SynapseMatch* _tmp33_;
			_match_index = _match_index + 1;
			_tmp6_ = _match_index;
			_tmp7_ = _match_size;
			if (!(_tmp6_ < _tmp7_)) {
				break;
			}
			_tmp8_ = _match_list;
			_tmp9_ = gee_list_get (_tmp8_, _match_index);
			match = (SynapseMatch*) _tmp9_;
			list = NULL;
			_tmp10_ = match;
			_tmp11_ = synapse_match_get_match_type (_tmp10_);
			_tmp12_ = _tmp11_;
			type = (gint) _tmp12_;
			if (type == ((gint) SYNAPSE_MATCH_TYPE_GENERIC_URI)) {
				gchar* uri = NULL;
				SynapseMatch* _tmp13_;
				const gchar* _tmp14_;
				const gchar* _tmp15_;
				gchar* _tmp16_;
				gboolean _tmp17_ = FALSE;
				gboolean _tmp18_ = FALSE;
				const gchar* _tmp19_;
				_tmp13_ = match;
				_tmp14_ = synapse_uri_match_get_uri (SYNAPSE_IS_URI_MATCH (_tmp13_) ? ((SynapseUriMatch*) _tmp13_) : NULL);
				_tmp15_ = _tmp14_;
				_tmp16_ = g_strdup (_tmp15_);
				uri = _tmp16_;
				_tmp19_ = uri;
				if (g_str_has_prefix (_tmp19_, "http://")) {
					_tmp18_ = TRUE;
				} else {
					const gchar* _tmp20_;
					_tmp20_ = uri;
					_tmp18_ = g_str_has_prefix (_tmp20_, "ftp://");
				}
				if (_tmp18_) {
					_tmp17_ = TRUE;
				} else {
					const gchar* _tmp21_;
					_tmp21_ = uri;
					_tmp17_ = g_str_has_prefix (_tmp21_, "https://");
				}
				if (_tmp17_) {
					type = 8;
				}
				_g_free0 (uri);
			}
			_tmp22_ = match;
			if (SYNAPSE_DESKTOP_FILE_PLUGIN_IS_ACTION_MATCH (_tmp22_)) {
				type = 10;
			}
			_tmp23_ = categories;
			_tmp24_ = g_hash_table_lookup (_tmp23_, (gpointer) ((gintptr) type));
			_tmp25_ = _g_object_ref0 ((GeeLinkedList*) _tmp24_);
			_g_object_unref0 (list);
			list = _tmp25_;
			_tmp26_ = list;
			if (_tmp26_ == NULL) {
				GeeLinkedList* _tmp27_;
				GHashTable* _tmp28_;
				GeeLinkedList* _tmp29_;
				GeeLinkedList* _tmp30_;
				GeeLinkedList* _tmp31_;
				_tmp27_ = gee_linked_list_new (SYNAPSE_TYPE_MATCH, (GBoxedCopyFunc) g_object_ref, (GDestroyNotify) g_object_unref, NULL, NULL, NULL);
				_g_object_unref0 (list);
				list = _tmp27_;
				_tmp28_ = categories;
				_tmp29_ = list;
				_tmp30_ = _g_object_ref0 (_tmp29_);
				g_hash_table_insert (_tmp28_, (gpointer) ((gintptr) type), _tmp30_);
				_tmp31_ = categories_order;
				gee_abstract_collection_add ((GeeAbstractCollection*) _tmp31_, (gpointer) ((gintptr) type));
			}
			_tmp32_ = list;
			_tmp33_ = match;
			gee_abstract_collection_add ((GeeAbstractCollection*) _tmp32_, _tmp33_);
			_g_object_unref0 (list);
			_g_object_unref0 (match);
		}
		_g_object_unref0 (_match_list);
	}
	self->priv->n_results = 0;
	rocker_widgets_search_view_clear (self);
	limit = ROCKER_WIDGETS_SEARCH_VIEW_MAX_RESULTS;
	_tmp35_ = gee_collection_get_size ((GeeCollection*) matches);
	_tmp36_ = _tmp35_;
	if ((_tmp36_ + 3) > ROCKER_WIDGETS_SEARCH_VIEW_MAX_RESULTS_BEFORE_LIMIT) {
		GeeLinkedList* _tmp37_;
		gint _tmp38_;
		gint _tmp39_;
		_tmp37_ = categories_order;
		_tmp38_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp37_);
		_tmp39_ = _tmp38_;
		_tmp34_ = _tmp39_ > 2;
	} else {
		_tmp34_ = FALSE;
	}
	if (_tmp34_) {
		limit = 5;
	}
	{
		GeeLinkedList* _type_list = NULL;
		GeeLinkedList* _tmp40_;
		GeeLinkedList* _tmp41_;
		gint _type_size = 0;
		GeeLinkedList* _tmp42_;
		gint _tmp43_;
		gint _tmp44_;
		gint _type_index = 0;
		_tmp40_ = categories_order;
		_tmp41_ = _g_object_ref0 (_tmp40_);
		_type_list = _tmp41_;
		_tmp42_ = _type_list;
		_tmp43_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp42_);
		_tmp44_ = _tmp43_;
		_type_size = _tmp44_;
		_type_index = -1;
		while (TRUE) {
			gint _tmp45_;
			gint _tmp46_;
			gint type = 0;
			GeeLinkedList* _tmp47_;
			gpointer _tmp48_;
			gchar* label = NULL;
			gchar* _tmp49_;
			GtkLabel* header = NULL;
			const gchar* _tmp59_;
			GtkLabel* _tmp60_;
			GtkLabel* _tmp61_;
			GtkLabel* _tmp62_;
			GtkLabel* _tmp63_;
			GtkLabel* _tmp64_;
			GtkLabel* _tmp65_;
			GtkStyleContext* _tmp66_;
			GtkLabel* _tmp67_;
			GtkBox* _tmp68_;
			GtkLabel* _tmp69_;
			GeeLinkedList* list = NULL;
			GHashTable* _tmp70_;
			gconstpointer _tmp71_;
			GeeLinkedList* _tmp72_;
			gint old_selected = 0;
			gint _tmp73_;
			gint _tmp74_;
			_type_index = _type_index + 1;
			_tmp45_ = _type_index;
			_tmp46_ = _type_size;
			if (!(_tmp45_ < _tmp46_)) {
				break;
			}
			_tmp47_ = _type_list;
			_tmp48_ = gee_abstract_list_get ((GeeAbstractList*) _tmp47_, _type_index);
			type = (gint) ((gintptr) _tmp48_);
			_tmp49_ = g_strdup ("");
			label = _tmp49_;
			switch (type) {
				case SYNAPSE_MATCH_TYPE_UNKNOWN:
				{
					gchar* _tmp50_;
					_tmp50_ = g_strdup (_ ("Other"));
					_g_free0 (label);
					label = _tmp50_;
					break;
				}
				case SYNAPSE_MATCH_TYPE_TEXT:
				{
					gchar* _tmp51_;
					_tmp51_ = g_strdup (_ ("Text"));
					_g_free0 (label);
					label = _tmp51_;
					break;
				}
				case SYNAPSE_MATCH_TYPE_APPLICATION:
				{
					gchar* _tmp52_;
					_tmp52_ = g_strdup (_ ("Applications"));
					_g_free0 (label);
					label = _tmp52_;
					break;
				}
				case SYNAPSE_MATCH_TYPE_GENERIC_URI:
				{
					gchar* _tmp53_;
					_tmp53_ = g_strdup (_ ("Files"));
					_g_free0 (label);
					label = _tmp53_;
					break;
				}
				case SYNAPSE_MATCH_TYPE_ACTION:
				{
					gchar* _tmp54_;
					_tmp54_ = g_strdup (_ ("Actions"));
					_g_free0 (label);
					label = _tmp54_;
					break;
				}
				case SYNAPSE_MATCH_TYPE_SEARCH:
				{
					gchar* _tmp55_;
					_tmp55_ = g_strdup (_ ("Search"));
					_g_free0 (label);
					label = _tmp55_;
					break;
				}
				case SYNAPSE_MATCH_TYPE_CONTACT:
				{
					gchar* _tmp56_;
					_tmp56_ = g_strdup (_ ("Contacts"));
					_g_free0 (label);
					label = _tmp56_;
					break;
				}
				case 8:
				{
					gchar* _tmp57_;
					_tmp57_ = g_strdup (_ ("Internet"));
					_g_free0 (label);
					label = _tmp57_;
					break;
				}
				case 10:
				{
					gchar* _tmp58_;
					_tmp58_ = g_strdup (_ ("Application Actions"));
					_g_free0 (label);
					label = _tmp58_;
					break;
				}
				default:
				break;
			}
			_tmp59_ = label;
			_tmp60_ = (GtkLabel*) gtk_label_new (_tmp59_);
			g_object_ref_sink (_tmp60_);
			header = _tmp60_;
			_tmp61_ = header;
			g_object_set (G_TYPE_CHECK_INSTANCE_CAST (_tmp61_, gtk_misc_get_type (), GtkMisc), "xalign", 0.0f, NULL);
			_tmp62_ = header;
			gtk_widget_set_margin_start ((GtkWidget*) _tmp62_, 8);
			_tmp63_ = header;
			gtk_widget_set_margin_bottom ((GtkWidget*) _tmp63_, 4);
			_tmp64_ = header;
			gtk_label_set_use_markup (_tmp64_, TRUE);
			_tmp65_ = header;
			_tmp66_ = gtk_widget_get_style_context ((GtkWidget*) _tmp65_);
			gtk_style_context_add_class (_tmp66_, "h4");
			_tmp67_ = header;
			gtk_widget_show ((GtkWidget*) _tmp67_);
			_tmp68_ = self->priv->main_box;
			_tmp69_ = header;
			gtk_box_pack_start (_tmp68_, (GtkWidget*) _tmp69_, FALSE, TRUE, (guint) 0);
			_tmp70_ = categories;
			_tmp71_ = g_hash_table_lookup (_tmp70_, (gpointer) ((gintptr) type));
			_tmp72_ = _g_object_ref0 ((GeeLinkedList*) _tmp71_);
			list = _tmp72_;
			_tmp73_ = rocker_widgets_search_view_get_selected (self);
			_tmp74_ = _tmp73_;
			old_selected = _tmp74_;
			{
				gint i = 0;
				i = 0;
				{
					gboolean _tmp75_ = FALSE;
					_tmp75_ = TRUE;
					while (TRUE) {
						gboolean _tmp77_ = FALSE;
						SynapseMatch* match = NULL;
						GeeLinkedList* _tmp81_;
						gpointer _tmp82_;
						SynapseMatch* _tmp87_;
						SynapseMatchType _tmp88_;
						SynapseMatchType _tmp89_;
						if (!_tmp75_) {
							gint _tmp76_;
							_tmp76_ = i;
							i = _tmp76_ + 1;
						}
						_tmp75_ = FALSE;
						if (i < limit) {
							GeeLinkedList* _tmp78_;
							gint _tmp79_;
							gint _tmp80_;
							_tmp78_ = list;
							_tmp79_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp78_);
							_tmp80_ = _tmp79_;
							_tmp77_ = i < _tmp80_;
						} else {
							_tmp77_ = FALSE;
						}
						if (!_tmp77_) {
							break;
						}
						_tmp81_ = list;
						_tmp82_ = gee_abstract_list_get ((GeeAbstractList*) _tmp81_, i);
						match = (SynapseMatch*) _tmp82_;
						if (type == 10) {
							SynapseMatch* _tmp83_;
							RockerBackendApp* _tmp84_;
							RockerBackendApp* _tmp85_;
							gint _tmp86_;
							_tmp83_ = match;
							_tmp84_ = rocker_backend_app_new_from_synapse_match (_tmp83_, NULL);
							_tmp85_ = _tmp84_;
							rocker_widgets_search_view_show_action (self, _tmp85_);
							_g_object_unref0 (_tmp85_);
							_tmp86_ = self->priv->n_results;
							self->priv->n_results = _tmp86_ + 1;
							_g_object_unref0 (match);
							continue;
						}
						_tmp87_ = match;
						_tmp88_ = synapse_match_get_match_type (_tmp87_);
						_tmp89_ = _tmp88_;
						if (_tmp89_ == SYNAPSE_MATCH_TYPE_UNKNOWN) {
							GeeList* actions = NULL;
							SynapseMatch* _tmp90_;
							GeeList* _tmp91_;
							_tmp90_ = match;
							_tmp91_ = rocker_backend_synapse_search_find_actions_for_match (_tmp90_);
							actions = _tmp91_;
							{
								GeeList* _action_list = NULL;
								GeeList* _tmp92_;
								GeeList* _tmp93_;
								gint _action_size = 0;
								GeeList* _tmp94_;
								gint _tmp95_;
								gint _tmp96_;
								gint _action_index = 0;
								_tmp92_ = actions;
								_tmp93_ = _g_object_ref0 (_tmp92_);
								_action_list = _tmp93_;
								_tmp94_ = _action_list;
								_tmp95_ = gee_collection_get_size ((GeeCollection*) _tmp94_);
								_tmp96_ = _tmp95_;
								_action_size = _tmp96_;
								_action_index = -1;
								while (TRUE) {
									gint _tmp97_;
									gint _tmp98_;
									SynapseMatch* action = NULL;
									GeeList* _tmp99_;
									gpointer _tmp100_;
									SynapseMatch* _tmp101_;
									SynapseMatch* _tmp102_;
									RockerBackendApp* _tmp103_;
									RockerBackendApp* _tmp104_;
									gint _tmp105_;
									_action_index = _action_index + 1;
									_tmp97_ = _action_index;
									_tmp98_ = _action_size;
									if (!(_tmp97_ < _tmp98_)) {
										break;
									}
									_tmp99_ = _action_list;
									_tmp100_ = gee_list_get (_tmp99_, _action_index);
									action = (SynapseMatch*) _tmp100_;
									_tmp101_ = action;
									_tmp102_ = match;
									_tmp103_ = rocker_backend_app_new_from_synapse_match (_tmp101_, _tmp102_);
									_tmp104_ = _tmp103_;
									rocker_widgets_search_view_show_app (self, _tmp104_, search_term);
									_g_object_unref0 (_tmp104_);
									_tmp105_ = self->priv->n_results;
									self->priv->n_results = _tmp105_ + 1;
									_g_object_unref0 (action);
								}
								_g_object_unref0 (_action_list);
							}
							_g_object_unref0 (actions);
						} else {
							SynapseMatch* _tmp106_;
							RockerBackendApp* _tmp107_;
							RockerBackendApp* _tmp108_;
							gint _tmp109_;
							_tmp106_ = match;
							_tmp107_ = rocker_backend_app_new_from_synapse_match (_tmp106_, NULL);
							_tmp108_ = _tmp107_;
							rocker_widgets_search_view_show_app (self, _tmp108_, search_term);
							_g_object_unref0 (_tmp108_);
							_tmp109_ = self->priv->n_results;
							self->priv->n_results = _tmp109_ + 1;
						}
						_g_object_unref0 (match);
					}
				}
			}
			rocker_widgets_search_view_set_selected (self, old_selected);
			_g_object_unref0 (list);
			_g_object_unref0 (header);
			_g_free0 (label);
		}
		_g_object_unref0 (_type_list);
	}
	_g_object_unref0 (categories_order);
	_g_hash_table_unref0 (categories);
}

static Block8Data*
block8_data_ref (Block8Data* _data8_)
{
	g_atomic_int_inc (&_data8_->_ref_count_);
	return _data8_;
}

static void
block8_data_unref (void * _userdata_)
{
	Block8Data* _data8_;
	_data8_ = (Block8Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data8_->_ref_count_)) {
		RockerWidgetsSearchView* self;
		self = _data8_->self;
		_g_object_unref0 (_data8_->search_item);
		_g_object_unref0 (_data8_->app);
		_g_object_unref0 (self);
		g_slice_free (Block8Data, _data8_);
	}
}

static void
__lambda48_ (RockerWidgetsSearchView* self,
             SynapseSearchMatch* search,
             SynapseMatch* target)
{
	g_return_if_fail (search != NULL);
	g_signal_emit (self, rocker_widgets_search_view_signals[ROCKER_WIDGETS_SEARCH_VIEW_START_SEARCH_SIGNAL], 0, search, target);
}

static void
___lambda48__rocker_backend_app_start_search (RockerBackendApp* _sender,
                                              SynapseSearchMatch* search_match,
                                              SynapseMatch* target,
                                              gpointer self)
{
	__lambda48_ ((RockerWidgetsSearchView*) self, search_match, target);
}

static gboolean
__lambda49_ (Block8Data* _data8_)
{
	RockerWidgetsSearchView* self;
	gboolean result = FALSE;
	self = _data8_->self;
	if (!_data8_->search_item->dragging) {
		rocker_backend_app_launch (_data8_->app);
		g_signal_emit (self, rocker_widgets_search_view_signals[ROCKER_WIDGETS_SEARCH_VIEW_APP_LAUNCHED_SIGNAL], 0);
	}
	result = TRUE;
	return result;
}

static gboolean
___lambda49__gtk_widget_button_release_event (GtkWidget* _sender,
                                              GdkEventButton* event,
                                              gpointer self)
{
	gboolean result;
	result = __lambda49_ (self);
	return result;
}

static void
rocker_widgets_search_view_show_app (RockerWidgetsSearchView* self,
                                     RockerBackendApp* app,
                                     const gchar* search_term)
{
	Block8Data* _data8_;
	RockerBackendApp* _tmp0_;
	RockerWidgetsSearchItem* _tmp1_;
	GtkBox* _tmp2_;
	GeeHashMap* _tmp3_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (app != NULL);
	g_return_if_fail (search_term != NULL);
	_data8_ = g_slice_new0 (Block8Data);
	_data8_->_ref_count_ = 1;
	_data8_->self = g_object_ref (self);
	_tmp0_ = _g_object_ref0 (app);
	_g_object_unref0 (_data8_->app);
	_data8_->app = _tmp0_;
	_tmp1_ = rocker_widgets_search_item_new (_data8_->app, search_term, FALSE, "");
	g_object_ref_sink (_tmp1_);
	_data8_->search_item = _tmp1_;
	g_signal_connect_object (_data8_->app, "start-search", (GCallback) ___lambda48__rocker_backend_app_start_search, self, 0);
	g_signal_connect_data ((GtkWidget*) _data8_->search_item, "button-release-event", (GCallback) ___lambda49__gtk_widget_button_release_event, block8_data_ref (_data8_), (GClosureNotify) block8_data_unref, 0);
	_tmp2_ = self->priv->main_box;
	gtk_box_pack_start (_tmp2_, (GtkWidget*) _data8_->search_item, FALSE, FALSE, (guint) 0);
	gtk_widget_show_all ((GtkWidget*) _data8_->search_item);
	_tmp3_ = self->priv->items;
	gee_abstract_map_set ((GeeAbstractMap*) _tmp3_, _data8_->app, _data8_->search_item);
	block8_data_unref (_data8_);
	_data8_ = NULL;
}

static Block9Data*
block9_data_ref (Block9Data* _data9_)
{
	g_atomic_int_inc (&_data9_->_ref_count_);
	return _data9_;
}

static void
block9_data_unref (void * _userdata_)
{
	Block9Data* _data9_;
	_data9_ = (Block9Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data9_->_ref_count_)) {
		RockerWidgetsSearchView* self;
		self = _data9_->self;
		_g_object_unref0 (_data9_->search_item);
		_g_object_unref0 (_data9_->app);
		_g_object_unref0 (self);
		g_slice_free (Block9Data, _data9_);
	}
}

static void
__lambda46_ (RockerWidgetsSearchView* self,
             SynapseSearchMatch* search,
             SynapseMatch* target)
{
	g_return_if_fail (search != NULL);
	g_signal_emit (self, rocker_widgets_search_view_signals[ROCKER_WIDGETS_SEARCH_VIEW_START_SEARCH_SIGNAL], 0, search, target);
}

static void
___lambda46__rocker_backend_app_start_search (RockerBackendApp* _sender,
                                              SynapseSearchMatch* search_match,
                                              SynapseMatch* target,
                                              gpointer self)
{
	__lambda46_ ((RockerWidgetsSearchView*) self, search_match, target);
}

static gboolean
__lambda47_ (Block9Data* _data9_)
{
	RockerWidgetsSearchView* self;
	gboolean result = FALSE;
	self = _data9_->self;
	if (!_data9_->search_item->dragging) {
		SynapseMatch* _tmp0_;
		SynapseMatch* _tmp1_;
		_tmp0_ = rocker_backend_app_get_match (_data9_->app);
		_tmp1_ = _tmp0_;
		synapse_match_execute ((SynapseMatch*) G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, SYNAPSE_DESKTOP_FILE_PLUGIN_TYPE_ACTION_MATCH, SynapseDesktopFilePluginActionMatch), NULL);
		g_signal_emit (self, rocker_widgets_search_view_signals[ROCKER_WIDGETS_SEARCH_VIEW_APP_LAUNCHED_SIGNAL], 0);
	}
	result = TRUE;
	return result;
}

static gboolean
___lambda47__gtk_widget_button_release_event (GtkWidget* _sender,
                                              GdkEventButton* event,
                                              gpointer self)
{
	gboolean result;
	result = __lambda47_ (self);
	return result;
}

static void
rocker_widgets_search_view_show_action (RockerWidgetsSearchView* self,
                                        RockerBackendApp* app)
{
	Block9Data* _data9_;
	RockerBackendApp* _tmp0_;
	SynapseMatch* _tmp1_;
	SynapseMatch* _tmp2_;
	const gchar* _tmp3_;
	const gchar* _tmp4_;
	RockerWidgetsSearchItem* _tmp5_;
	GtkBox* _tmp6_;
	GeeHashMap* _tmp7_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (app != NULL);
	_data9_ = g_slice_new0 (Block9Data);
	_data9_->_ref_count_ = 1;
	_data9_->self = g_object_ref (self);
	_tmp0_ = _g_object_ref0 (app);
	_g_object_unref0 (_data9_->app);
	_data9_->app = _tmp0_;
	_tmp1_ = rocker_backend_app_get_match (_data9_->app);
	_tmp2_ = _tmp1_;
	_tmp3_ = synapse_match_get_title (_tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = rocker_widgets_search_item_new (_data9_->app, "", TRUE, _tmp4_);
	g_object_ref_sink (_tmp5_);
	_data9_->search_item = _tmp5_;
	g_signal_connect_object (_data9_->app, "start-search", (GCallback) ___lambda46__rocker_backend_app_start_search, self, 0);
	g_signal_connect_data ((GtkWidget*) _data9_->search_item, "button-release-event", (GCallback) ___lambda47__gtk_widget_button_release_event, block9_data_ref (_data9_), (GClosureNotify) block9_data_unref, 0);
	_tmp6_ = self->priv->main_box;
	gtk_box_pack_start (_tmp6_, (GtkWidget*) _data9_->search_item, FALSE, FALSE, (guint) 0);
	gtk_widget_show_all ((GtkWidget*) _data9_->search_item);
	_tmp7_ = self->priv->items;
	gee_abstract_map_set ((GeeAbstractMap*) _tmp7_, _data9_->app, _data9_->search_item);
	block9_data_unref (_data9_);
	_data9_ = NULL;
}

static void
_____lambda45_ (RockerWidgetsSearchView* self,
                SynapseSearchMatch* search,
                SynapseMatch* target)
{
	g_return_if_fail (search != NULL);
	g_signal_emit (self, rocker_widgets_search_view_signals[ROCKER_WIDGETS_SEARCH_VIEW_START_SEARCH_SIGNAL], 0, search, target);
}

static void
______lambda45__rocker_backend_app_start_search (RockerBackendApp* _sender,
                                                 SynapseSearchMatch* search_match,
                                                 SynapseMatch* target,
                                                 gpointer self)
{
	_____lambda45_ ((RockerWidgetsSearchView*) self, search_match, target);
}

void
rocker_widgets_search_view_toggle_context (RockerWidgetsSearchView* self,
                                           gboolean show)
{
	gdouble prev_y = 0.0;
	GtkAdjustment* _tmp0_;
	GtkAdjustment* _tmp1_;
	gdouble _tmp2_;
	gdouble _tmp3_;
	gboolean _tmp4_ = FALSE;
	GtkAdjustment* _tmp53_;
	GtkAdjustment* _tmp54_;
	g_return_if_fail (self != NULL);
	_tmp0_ = gtk_scrolled_window_get_vadjustment ((GtkScrolledWindow*) self);
	_tmp1_ = _tmp0_;
	_tmp2_ = gtk_adjustment_get_value (_tmp1_);
	_tmp3_ = _tmp2_;
	prev_y = _tmp3_;
	if (show) {
		gboolean _tmp5_;
		_tmp5_ = self->priv->_in_context_view;
		_tmp4_ = _tmp5_ == FALSE;
	} else {
		_tmp4_ = FALSE;
	}
	if (_tmp4_) {
		RockerWidgetsSearchItem* _tmp6_;
		RockerBackendApp* _tmp7_;
		RockerBackendApp* _tmp8_;
		SynapseMatch* _tmp9_;
		SynapseMatch* _tmp10_;
		SynapseMatchType _tmp11_;
		SynapseMatchType _tmp12_;
		GtkBox* _tmp13_;
		GList* _tmp14_;
		GeeList* actions = NULL;
		RockerWidgetsSearchItem* _tmp17_;
		RockerBackendApp* _tmp18_;
		RockerBackendApp* _tmp19_;
		SynapseMatch* _tmp20_;
		SynapseMatch* _tmp21_;
		GeeList* _tmp22_;
		GtkBox* _tmp44_;
		GtkAllocation alloc = {0};
		RockerWidgetsSearchItem* _tmp45_;
		GtkAllocation _tmp46_ = {0};
		GtkFixed* _tmp47_;
		GtkBox* _tmp48_;
		GtkAllocation _tmp49_;
		GtkAllocation _tmp50_;
		_tmp6_ = self->priv->selected_app;
		_tmp7_ = rocker_widgets_search_item_get_app (_tmp6_);
		_tmp8_ = _tmp7_;
		_tmp9_ = rocker_backend_app_get_match (_tmp8_);
		_tmp10_ = _tmp9_;
		_tmp11_ = synapse_match_get_match_type (_tmp10_);
		_tmp12_ = _tmp11_;
		if (_tmp12_ == SYNAPSE_MATCH_TYPE_ACTION) {
			return;
		}
		rocker_widgets_search_view_set_in_context_view (self, TRUE);
		_tmp13_ = self->priv->context_box;
		_tmp14_ = gtk_container_get_children ((GtkContainer*) _tmp13_);
		{
			GList* child_collection = NULL;
			GList* child_it = NULL;
			child_collection = _tmp14_;
			for (child_it = child_collection; child_it != NULL; child_it = child_it->next) {
				GtkWidget* child = NULL;
				child = (GtkWidget*) child_it->data;
				{
					GtkBox* _tmp15_;
					GtkWidget* _tmp16_;
					_tmp15_ = self->priv->context_box;
					_tmp16_ = child;
					gtk_container_remove ((GtkContainer*) _tmp15_, _tmp16_);
				}
			}
			(child_collection == NULL) ? NULL : (child_collection = (g_list_free (child_collection), NULL));
		}
		_tmp17_ = self->priv->selected_app;
		_tmp18_ = rocker_widgets_search_item_get_app (_tmp17_);
		_tmp19_ = _tmp18_;
		_tmp20_ = rocker_backend_app_get_match (_tmp19_);
		_tmp21_ = _tmp20_;
		_tmp22_ = rocker_backend_synapse_search_find_actions_for_match (_tmp21_);
		actions = _tmp22_;
		{
			GeeList* _action_list = NULL;
			GeeList* _tmp23_;
			GeeList* _tmp24_;
			gint _action_size = 0;
			GeeList* _tmp25_;
			gint _tmp26_;
			gint _tmp27_;
			gint _action_index = 0;
			_tmp23_ = actions;
			_tmp24_ = _g_object_ref0 (_tmp23_);
			_action_list = _tmp24_;
			_tmp25_ = _action_list;
			_tmp26_ = gee_collection_get_size ((GeeCollection*) _tmp25_);
			_tmp27_ = _tmp26_;
			_action_size = _tmp27_;
			_action_index = -1;
			while (TRUE) {
				gint _tmp28_;
				gint _tmp29_;
				SynapseMatch* action = NULL;
				GeeList* _tmp30_;
				gpointer _tmp31_;
				RockerBackendApp* app = NULL;
				SynapseMatch* _tmp32_;
				RockerWidgetsSearchItem* _tmp33_;
				RockerBackendApp* _tmp34_;
				RockerBackendApp* _tmp35_;
				SynapseMatch* _tmp36_;
				SynapseMatch* _tmp37_;
				RockerBackendApp* _tmp38_;
				RockerBackendApp* _tmp39_;
				GtkBox* _tmp40_;
				RockerBackendApp* _tmp41_;
				RockerWidgetsSearchItem* _tmp42_;
				RockerWidgetsSearchItem* _tmp43_;
				_action_index = _action_index + 1;
				_tmp28_ = _action_index;
				_tmp29_ = _action_size;
				if (!(_tmp28_ < _tmp29_)) {
					break;
				}
				_tmp30_ = _action_list;
				_tmp31_ = gee_list_get (_tmp30_, _action_index);
				action = (SynapseMatch*) _tmp31_;
				_tmp32_ = action;
				_tmp33_ = self->priv->selected_app;
				_tmp34_ = rocker_widgets_search_item_get_app (_tmp33_);
				_tmp35_ = _tmp34_;
				_tmp36_ = rocker_backend_app_get_match (_tmp35_);
				_tmp37_ = _tmp36_;
				_tmp38_ = rocker_backend_app_new_from_synapse_match (_tmp32_, _tmp37_);
				app = _tmp38_;
				_tmp39_ = app;
				g_signal_connect_object (_tmp39_, "start-search", (GCallback) ______lambda45__rocker_backend_app_start_search, self, 0);
				_tmp40_ = self->priv->context_box;
				_tmp41_ = app;
				_tmp42_ = rocker_widgets_search_item_new (_tmp41_, "", FALSE, "");
				g_object_ref_sink (_tmp42_);
				_tmp43_ = _tmp42_;
				gtk_box_pack_start (_tmp40_, (GtkWidget*) _tmp43_, TRUE, TRUE, (guint) 0);
				_g_object_unref0 (_tmp43_);
				_g_object_unref0 (app);
				_g_object_unref0 (action);
			}
			_g_object_unref0 (_action_list);
		}
		_tmp44_ = self->priv->context_box;
		gtk_widget_show_all ((GtkWidget*) _tmp44_);
		_tmp45_ = self->priv->selected_app;
		gtk_widget_get_allocation ((GtkWidget*) _tmp45_, &_tmp46_);
		alloc = _tmp46_;
		_tmp47_ = self->priv->context_fixed;
		_tmp48_ = self->priv->context_box;
		_tmp49_ = alloc;
		gtk_fixed_move (_tmp47_, (GtkWidget*) _tmp48_, 0, _tmp49_.y);
		_tmp50_ = alloc;
		self->priv->context_selected_y = _tmp50_.y;
		rocker_widgets_search_view_set_context_selected (self, 0);
		_g_object_unref0 (actions);
	} else {
		gint _tmp51_;
		gint _tmp52_;
		rocker_widgets_search_view_set_in_context_view (self, FALSE);
		_tmp51_ = rocker_widgets_search_view_get_selected (self);
		_tmp52_ = _tmp51_;
		rocker_widgets_search_view_set_selected (self, _tmp52_);
	}
	_tmp53_ = gtk_scrolled_window_get_vadjustment ((GtkScrolledWindow*) self);
	_tmp54_ = _tmp53_;
	gtk_adjustment_set_value (_tmp54_, prev_y);
}

void
rocker_widgets_search_view_clear (RockerWidgetsSearchView* self)
{
	gboolean _tmp0_;
	GtkBox* _tmp1_;
	GList* _tmp2_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_in_context_view;
	if (_tmp0_) {
		rocker_widgets_search_view_toggle_context (self, FALSE);
	}
	_tmp1_ = self->priv->main_box;
	_tmp2_ = gtk_container_get_children ((GtkContainer*) _tmp1_);
	{
		GList* child_collection = NULL;
		GList* child_it = NULL;
		child_collection = _tmp2_;
		for (child_it = child_collection; child_it != NULL; child_it = child_it->next) {
			GtkWidget* child = NULL;
			child = (GtkWidget*) child_it->data;
			{
				GtkWidget* _tmp3_;
				_tmp3_ = child;
				gtk_widget_destroy (_tmp3_);
			}
		}
		(child_collection == NULL) ? NULL : (child_collection = (g_list_free (child_collection), NULL));
	}
}

void
rocker_widgets_search_view_down (RockerWidgetsSearchView* self)
{
	gboolean _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_in_context_view;
	if (_tmp0_) {
		gint _tmp1_;
		gint _tmp2_;
		_tmp1_ = rocker_widgets_search_view_get_context_selected (self);
		_tmp2_ = _tmp1_;
		rocker_widgets_search_view_set_context_selected (self, _tmp2_ + 1);
	} else {
		gint _tmp3_;
		gint _tmp4_;
		_tmp3_ = rocker_widgets_search_view_get_selected (self);
		_tmp4_ = _tmp3_;
		rocker_widgets_search_view_set_selected (self, _tmp4_ + 1);
	}
}

void
rocker_widgets_search_view_up (RockerWidgetsSearchView* self)
{
	gboolean _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->_in_context_view;
	if (_tmp0_) {
		gint _tmp1_;
		gint _tmp2_;
		_tmp1_ = rocker_widgets_search_view_get_context_selected (self);
		_tmp2_ = _tmp1_;
		rocker_widgets_search_view_set_context_selected (self, _tmp2_ - 1);
	} else {
		gint _tmp3_;
		gint _tmp4_;
		_tmp3_ = rocker_widgets_search_view_get_selected (self);
		_tmp4_ = _tmp3_;
		rocker_widgets_search_view_set_selected (self, _tmp4_ - 1);
	}
}

static void
rocker_widgets_search_view_select_nth (RockerWidgetsSearchView* self,
                                       GtkBox* box,
                                       gint index)
{
	RockerWidgetsSearchItem* _tmp0_;
	GtkBox* _tmp2_;
	RockerWidgetsSearchItem* _tmp10_;
	GtkAllocation alloc = {0};
	RockerWidgetsSearchItem* _tmp11_;
	GtkAllocation _tmp12_ = {0};
	GtkAdjustment* _tmp13_;
	GtkAdjustment* _tmp14_;
	GtkAllocation _tmp15_;
	GtkAdjustment* _tmp16_;
	GtkAdjustment* _tmp17_;
	gdouble _tmp18_;
	gdouble _tmp19_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (box != NULL);
	_tmp0_ = self->priv->selected_app;
	if (_tmp0_ != NULL) {
		RockerWidgetsSearchItem* _tmp1_;
		_tmp1_ = self->priv->selected_app;
		gtk_widget_unset_state_flags ((GtkWidget*) _tmp1_, GTK_STATE_FLAG_PRELIGHT);
	}
	_tmp2_ = self->priv->main_box;
	if (box == _tmp2_) {
		GtkWidget* _tmp3_;
		RockerWidgetsSearchItem* _tmp4_;
		_tmp3_ = rocker_widgets_search_view_get_nth_main_item (self, index);
		_tmp4_ = ROCKER_WIDGETS_IS_SEARCH_ITEM (_tmp3_) ? ((RockerWidgetsSearchItem*) _tmp3_) : NULL;
		if (_tmp4_ == NULL) {
			_g_object_unref0 (_tmp3_);
		}
		_g_object_unref0 (self->priv->selected_app);
		self->priv->selected_app = _tmp4_;
	} else {
		GList* _tmp5_;
		GList* _tmp6_;
		gconstpointer _tmp7_;
		GtkWidget* _tmp8_;
		RockerWidgetsSearchItem* _tmp9_;
		_tmp5_ = gtk_container_get_children ((GtkContainer*) box);
		_tmp6_ = _tmp5_;
		_tmp7_ = g_list_nth_data (_tmp6_, (guint) index);
		_tmp8_ = (GtkWidget*) _tmp7_;
		_tmp9_ = _g_object_ref0 (ROCKER_WIDGETS_IS_SEARCH_ITEM (_tmp8_) ? ((RockerWidgetsSearchItem*) _tmp8_) : NULL);
		_g_object_unref0 (self->priv->selected_app);
		self->priv->selected_app = _tmp9_;
		(_tmp6_ == NULL) ? NULL : (_tmp6_ = (g_list_free (_tmp6_), NULL));
	}
	_tmp10_ = self->priv->selected_app;
	gtk_widget_set_state_flags ((GtkWidget*) _tmp10_, GTK_STATE_FLAG_PRELIGHT, TRUE);
	_tmp11_ = self->priv->selected_app;
	gtk_widget_get_allocation ((GtkWidget*) _tmp11_, &_tmp12_);
	alloc = _tmp12_;
	_tmp13_ = gtk_scrolled_window_get_vadjustment ((GtkScrolledWindow*) self);
	_tmp14_ = _tmp13_;
	_tmp15_ = alloc;
	_tmp16_ = gtk_scrolled_window_get_vadjustment ((GtkScrolledWindow*) self);
	_tmp17_ = _tmp16_;
	_tmp18_ = gtk_adjustment_get_page_size (_tmp17_);
	_tmp19_ = _tmp18_;
	gtk_adjustment_set_value (_tmp14_, MAX (_tmp15_.y - (_tmp19_ / 2), (gdouble) 0));
}

static GtkWidget*
rocker_widgets_search_view_get_nth_main_item (RockerWidgetsSearchView* self,
                                              gint n)
{
	gint i = 0;
	GtkBox* _tmp0_;
	GList* _tmp1_;
	GtkWidget* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	i = 0;
	_tmp0_ = self->priv->main_box;
	_tmp1_ = gtk_container_get_children ((GtkContainer*) _tmp0_);
	{
		GList* child_collection = NULL;
		GList* child_it = NULL;
		child_collection = _tmp1_;
		for (child_it = child_collection; child_it != NULL; child_it = child_it->next) {
			GtkWidget* child = NULL;
			child = (GtkWidget*) child_it->data;
			{
				gboolean _tmp2_ = FALSE;
				GtkWidget* _tmp6_;
				if (i == n) {
					GtkWidget* _tmp3_;
					_tmp3_ = child;
					_tmp2_ = ROCKER_WIDGETS_IS_SEARCH_ITEM (_tmp3_);
				} else {
					_tmp2_ = FALSE;
				}
				if (_tmp2_) {
					GtkWidget* _tmp4_;
					GtkWidget* _tmp5_;
					_tmp4_ = child;
					_tmp5_ = _g_object_ref0 (_tmp4_);
					result = _tmp5_;
					(child_collection == NULL) ? NULL : (child_collection = (g_list_free (child_collection), NULL));
					return result;
				}
				_tmp6_ = child;
				if (ROCKER_WIDGETS_IS_SEARCH_ITEM (_tmp6_)) {
					gint _tmp7_;
					_tmp7_ = i;
					i = _tmp7_ + 1;
				}
			}
		}
		(child_collection == NULL) ? NULL : (child_collection = (g_list_free (child_collection), NULL));
	}
	result = NULL;
	return result;
}

/**
         * Launch selected app
         *
         * @return indicates whether rocker should now be hidden
         */
gboolean
rocker_widgets_search_view_launch_selected (RockerWidgetsSearchView* self)
{
	RockerWidgetsSearchItem* _tmp0_;
	RockerWidgetsSearchItem* _tmp6_;
	gboolean _tmp7_ = FALSE;
	gboolean result = FALSE;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = self->priv->selected_app;
	if (_tmp0_->action) {
		RockerWidgetsSearchItem* _tmp1_;
		RockerBackendApp* _tmp2_;
		RockerBackendApp* _tmp3_;
		SynapseMatch* _tmp4_;
		SynapseMatch* _tmp5_;
		_tmp1_ = self->priv->selected_app;
		_tmp2_ = rocker_widgets_search_item_get_app (_tmp1_);
		_tmp3_ = _tmp2_;
		_tmp4_ = rocker_backend_app_get_match (_tmp3_);
		_tmp5_ = _tmp4_;
		synapse_match_execute ((SynapseMatch*) G_TYPE_CHECK_INSTANCE_CAST (_tmp5_, SYNAPSE_DESKTOP_FILE_PLUGIN_TYPE_ACTION_MATCH, SynapseDesktopFilePluginActionMatch), NULL);
		result = TRUE;
		return result;
	}
	_tmp6_ = self->priv->selected_app;
	g_signal_emit_by_name (_tmp6_, "launch-app", &_tmp7_);
	result = _tmp7_;
	return result;
}

gboolean
rocker_widgets_search_view_get_in_context_view (RockerWidgetsSearchView* self)
{
	gboolean result;
	g_return_val_if_fail (self != NULL, FALSE);
	result = self->priv->_in_context_view;
	return result;
}

static void
rocker_widgets_search_view_set_in_context_view (RockerWidgetsSearchView* self,
                                                gboolean value)
{
	g_return_if_fail (self != NULL);
	if (rocker_widgets_search_view_get_in_context_view (self) != value) {
		self->priv->_in_context_view = value;
		g_object_notify_by_pspec ((GObject *) self, rocker_widgets_search_view_properties[ROCKER_WIDGETS_SEARCH_VIEW_IN_CONTEXT_VIEW_PROPERTY]);
	}
}

gint
rocker_widgets_search_view_get_selected (RockerWidgetsSearchView* self)
{
	gint result;
	g_return_val_if_fail (self != NULL, 0);
	result = self->priv->_selected;
	return result;
}

void
rocker_widgets_search_view_set_selected (RockerWidgetsSearchView* self,
                                         gint value)
{
	gint max_index = 0;
	GtkBox* _tmp0_;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	self->priv->_selected = value;
	max_index = ((gint) self->priv->n_results) - 1;
	if (self->priv->_selected < 0) {
		self->priv->_selected = max_index;
	} else {
		if (self->priv->_selected > max_index) {
			self->priv->_selected = 0;
		}
	}
	_tmp0_ = self->priv->main_box;
	rocker_widgets_search_view_select_nth (self, _tmp0_, self->priv->_selected);
	_tmp1_ = self->priv->_in_context_view;
	if (_tmp1_) {
		rocker_widgets_search_view_toggle_context (self, FALSE);
	}
	g_object_notify_by_pspec ((GObject *) self, rocker_widgets_search_view_properties[ROCKER_WIDGETS_SEARCH_VIEW_SELECTED_PROPERTY]);
}

gint
rocker_widgets_search_view_get_context_selected (RockerWidgetsSearchView* self)
{
	gint result;
	g_return_val_if_fail (self != NULL, 0);
	result = self->priv->_context_selected;
	return result;
}

void
rocker_widgets_search_view_set_context_selected (RockerWidgetsSearchView* self,
                                                 gint value)
{
	gint max_index = 0;
	GtkBox* _tmp0_;
	GList* _tmp1_;
	GList* _tmp2_;
	gint _tmp3_;
	GtkBox* _tmp4_;
	g_return_if_fail (self != NULL);
	self->priv->_context_selected = value;
	_tmp0_ = self->priv->context_box;
	_tmp1_ = gtk_container_get_children ((GtkContainer*) _tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = ((gint) g_list_length (_tmp2_)) - 1;
	(_tmp2_ == NULL) ? NULL : (_tmp2_ = (g_list_free (_tmp2_), NULL));
	max_index = _tmp3_;
	if (self->priv->_context_selected < 0) {
		self->priv->_context_selected = max_index;
	} else {
		if (self->priv->_context_selected > max_index) {
			self->priv->_context_selected = 0;
		}
	}
	_tmp4_ = self->priv->context_box;
	rocker_widgets_search_view_select_nth (self, _tmp4_, self->priv->_context_selected);
	g_object_notify_by_pspec ((GObject *) self, rocker_widgets_search_view_properties[ROCKER_WIDGETS_SEARCH_VIEW_CONTEXT_SELECTED_PROPERTY]);
}

static void
g_cclosure_user_marshal_VOID__OBJECT_OBJECT (GClosure * closure,
                                             GValue * return_value,
                                             guint n_param_values,
                                             const GValue * param_values,
                                             gpointer invocation_hint,
                                             gpointer marshal_data)
{
	typedef void (*GMarshalFunc_VOID__OBJECT_OBJECT) (gpointer data1, gpointer arg_1, gpointer arg_2, gpointer data2);
	register GMarshalFunc_VOID__OBJECT_OBJECT callback;
	register GCClosure * cc;
	register gpointer data1;
	register gpointer data2;
	cc = (GCClosure *) closure;
	g_return_if_fail (n_param_values == 3);
	if (G_CCLOSURE_SWAP_DATA (closure)) {
		data1 = closure->data;
		data2 = param_values->data[0].v_pointer;
	} else {
		data1 = param_values->data[0].v_pointer;
		data2 = closure->data;
	}
	callback = (GMarshalFunc_VOID__OBJECT_OBJECT) (marshal_data ? marshal_data : cc->callback);
	callback (data1, g_value_get_object (param_values + 1), g_value_get_object (param_values + 2), data2);
}

static void
rocker_widgets_search_view_class_init (RockerWidgetsSearchViewClass * klass,
                                       gpointer klass_data)
{
	rocker_widgets_search_view_parent_class = g_type_class_peek_parent (klass);
	g_type_class_adjust_private_offset (klass, &RockerWidgetsSearchView_private_offset);
	G_OBJECT_CLASS (klass)->get_property = _vala_rocker_widgets_search_view_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_rocker_widgets_search_view_set_property;
	G_OBJECT_CLASS (klass)->finalize = rocker_widgets_search_view_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), ROCKER_WIDGETS_SEARCH_VIEW_IN_CONTEXT_VIEW_PROPERTY, rocker_widgets_search_view_properties[ROCKER_WIDGETS_SEARCH_VIEW_IN_CONTEXT_VIEW_PROPERTY] = g_param_spec_boolean ("in-context-view", "in-context-view", "in-context-view", FALSE, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), ROCKER_WIDGETS_SEARCH_VIEW_SELECTED_PROPERTY, rocker_widgets_search_view_properties[ROCKER_WIDGETS_SEARCH_VIEW_SELECTED_PROPERTY] = g_param_spec_int ("selected", "selected", "selected", G_MININT, G_MAXINT, 0, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), ROCKER_WIDGETS_SEARCH_VIEW_CONTEXT_SELECTED_PROPERTY, rocker_widgets_search_view_properties[ROCKER_WIDGETS_SEARCH_VIEW_CONTEXT_SELECTED_PROPERTY] = g_param_spec_int ("context-selected", "context-selected", "context-selected", G_MININT, G_MAXINT, 0, G_PARAM_STATIC_STRINGS | G_PARAM_READABLE | G_PARAM_WRITABLE));
	rocker_widgets_search_view_signals[ROCKER_WIDGETS_SEARCH_VIEW_START_SEARCH_SIGNAL] = g_signal_new ("start-search", ROCKER_WIDGETS_TYPE_SEARCH_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_user_marshal_VOID__OBJECT_OBJECT, G_TYPE_NONE, 2, SYNAPSE_TYPE_SEARCH_MATCH, SYNAPSE_TYPE_MATCH);
	rocker_widgets_search_view_signals[ROCKER_WIDGETS_SEARCH_VIEW_APP_LAUNCHED_SIGNAL] = g_signal_new ("app-launched", ROCKER_WIDGETS_TYPE_SEARCH_VIEW, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
}

static void
rocker_widgets_search_view_instance_init (RockerWidgetsSearchView * self,
                                          gpointer klass)
{
	self->priv = rocker_widgets_search_view_get_instance_private (self);
	self->priv->_in_context_view = FALSE;
	self->priv->selected_app = NULL;
	self->priv->n_results = 0;
	self->priv->_selected = 0;
	self->priv->_context_selected = 0;
}

static void
rocker_widgets_search_view_finalize (GObject * obj)
{
	RockerWidgetsSearchView * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, ROCKER_WIDGETS_TYPE_SEARCH_VIEW, RockerWidgetsSearchView);
	_g_object_unref0 (self->priv->items);
	_g_object_unref0 (self->priv->selected_app);
	_g_object_unref0 (self->priv->main_box);
	_g_object_unref0 (self->priv->context_box);
	_g_object_unref0 (self->priv->context_fixed);
	_g_object_unref0 (self->priv->view);
	G_OBJECT_CLASS (rocker_widgets_search_view_parent_class)->finalize (obj);
}

static GType
rocker_widgets_search_view_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (RockerWidgetsSearchViewClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) rocker_widgets_search_view_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (RockerWidgetsSearchView), 0, (GInstanceInitFunc) rocker_widgets_search_view_instance_init, NULL };
	GType rocker_widgets_search_view_type_id;
	rocker_widgets_search_view_type_id = g_type_register_static (gtk_scrolled_window_get_type (), "RockerWidgetsSearchView", &g_define_type_info, 0);
	RockerWidgetsSearchView_private_offset = g_type_add_instance_private (rocker_widgets_search_view_type_id, sizeof (RockerWidgetsSearchViewPrivate));
	return rocker_widgets_search_view_type_id;
}

GType
rocker_widgets_search_view_get_type (void)
{
	static volatile gsize rocker_widgets_search_view_type_id__volatile = 0;
	if (g_once_init_enter (&rocker_widgets_search_view_type_id__volatile)) {
		GType rocker_widgets_search_view_type_id;
		rocker_widgets_search_view_type_id = rocker_widgets_search_view_get_type_once ();
		g_once_init_leave (&rocker_widgets_search_view_type_id__volatile, rocker_widgets_search_view_type_id);
	}
	return rocker_widgets_search_view_type_id__volatile;
}

static void
_vala_rocker_widgets_search_view_get_property (GObject * object,
                                               guint property_id,
                                               GValue * value,
                                               GParamSpec * pspec)
{
	RockerWidgetsSearchView * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, ROCKER_WIDGETS_TYPE_SEARCH_VIEW, RockerWidgetsSearchView);
	switch (property_id) {
		case ROCKER_WIDGETS_SEARCH_VIEW_IN_CONTEXT_VIEW_PROPERTY:
		g_value_set_boolean (value, rocker_widgets_search_view_get_in_context_view (self));
		break;
		case ROCKER_WIDGETS_SEARCH_VIEW_SELECTED_PROPERTY:
		g_value_set_int (value, rocker_widgets_search_view_get_selected (self));
		break;
		case ROCKER_WIDGETS_SEARCH_VIEW_CONTEXT_SELECTED_PROPERTY:
		g_value_set_int (value, rocker_widgets_search_view_get_context_selected (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}

static void
_vala_rocker_widgets_search_view_set_property (GObject * object,
                                               guint property_id,
                                               const GValue * value,
                                               GParamSpec * pspec)
{
	RockerWidgetsSearchView * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, ROCKER_WIDGETS_TYPE_SEARCH_VIEW, RockerWidgetsSearchView);
	switch (property_id) {
		case ROCKER_WIDGETS_SEARCH_VIEW_IN_CONTEXT_VIEW_PROPERTY:
		rocker_widgets_search_view_set_in_context_view (self, g_value_get_boolean (value));
		break;
		case ROCKER_WIDGETS_SEARCH_VIEW_SELECTED_PROPERTY:
		rocker_widgets_search_view_set_selected (self, g_value_get_int (value));
		break;
		case ROCKER_WIDGETS_SEARCH_VIEW_CONTEXT_SELECTED_PROPERTY:
		rocker_widgets_search_view_set_context_selected (self, g_value_get_int (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}

