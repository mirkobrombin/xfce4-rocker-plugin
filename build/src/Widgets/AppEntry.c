/* AppEntry.c generated by valac 0.50.1, the Vala compiler
 * generated from AppEntry.vala, do not modify */

/* -*- Mode: vala; indent-tabs-mode: nil; tab-width: 4 -*-*/
/**/
/*  Copyright (C) 2011-2012 Giulio Collura*/
/**/
/*  This program is free software: you can redistribute it and/or modify*/
/*  it under the terms of the GNU General Public License as published by*/
/*  the Free Software Foundation, either version 3 of the License, or*/
/*  (at your option) any later version.*/
/**/
/*  This program is distributed in the hope that it will be useful,*/
/*  but WITHOUT ANY WARRANTY; without even the implied warranty of*/
/*  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the*/
/*  GNU General Public License for more details.*/
/**/
/*  You should have received a copy of the GNU General Public License*/
/*  along with this program.  If not, see <http://www.gnu.org/licenses/>.*/
/**/

#include <gtk/gtk.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <glib.h>
#include <gio/gio.h>
#include <gdk-pixbuf/gdk-pixbuf.h>
#include <gdk/gdk.h>
#include <float.h>
#include <math.h>
#include <pango/pango.h>
#include <gee.h>
#include <glib/gi18n-lib.h>

#define ROCKER_WIDGETS_TYPE_APP_ENTRY (rocker_widgets_app_entry_get_type ())
#define ROCKER_WIDGETS_APP_ENTRY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ROCKER_WIDGETS_TYPE_APP_ENTRY, RockerWidgetsAppEntry))
#define ROCKER_WIDGETS_APP_ENTRY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ROCKER_WIDGETS_TYPE_APP_ENTRY, RockerWidgetsAppEntryClass))
#define ROCKER_WIDGETS_IS_APP_ENTRY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ROCKER_WIDGETS_TYPE_APP_ENTRY))
#define ROCKER_WIDGETS_IS_APP_ENTRY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ROCKER_WIDGETS_TYPE_APP_ENTRY))
#define ROCKER_WIDGETS_APP_ENTRY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ROCKER_WIDGETS_TYPE_APP_ENTRY, RockerWidgetsAppEntryClass))

typedef struct _RockerWidgetsAppEntry RockerWidgetsAppEntry;
typedef struct _RockerWidgetsAppEntryClass RockerWidgetsAppEntryClass;
typedef struct _RockerWidgetsAppEntryPrivate RockerWidgetsAppEntryPrivate;

#define ROCKER_BACKEND_TYPE_APP (rocker_backend_app_get_type ())
#define ROCKER_BACKEND_APP(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ROCKER_BACKEND_TYPE_APP, RockerBackendApp))
#define ROCKER_BACKEND_APP_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ROCKER_BACKEND_TYPE_APP, RockerBackendAppClass))
#define ROCKER_BACKEND_IS_APP(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ROCKER_BACKEND_TYPE_APP))
#define ROCKER_BACKEND_IS_APP_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ROCKER_BACKEND_TYPE_APP))
#define ROCKER_BACKEND_APP_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ROCKER_BACKEND_TYPE_APP, RockerBackendAppClass))

typedef struct _RockerBackendApp RockerBackendApp;
typedef struct _RockerBackendAppClass RockerBackendAppClass;

#define ROCKER_BACKEND_TYPE_APP_SYSTEM (rocker_backend_app_system_get_type ())
#define ROCKER_BACKEND_APP_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ROCKER_BACKEND_TYPE_APP_SYSTEM, RockerBackendAppSystem))
#define ROCKER_BACKEND_APP_SYSTEM_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ROCKER_BACKEND_TYPE_APP_SYSTEM, RockerBackendAppSystemClass))
#define ROCKER_BACKEND_IS_APP_SYSTEM(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ROCKER_BACKEND_TYPE_APP_SYSTEM))
#define ROCKER_BACKEND_IS_APP_SYSTEM_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ROCKER_BACKEND_TYPE_APP_SYSTEM))
#define ROCKER_BACKEND_APP_SYSTEM_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ROCKER_BACKEND_TYPE_APP_SYSTEM, RockerBackendAppSystemClass))

typedef struct _RockerBackendAppSystem RockerBackendAppSystem;
typedef struct _RockerBackendAppSystemClass RockerBackendAppSystemClass;
enum  {
	ROCKER_WIDGETS_APP_ENTRY_0_PROPERTY,
	ROCKER_WIDGETS_APP_ENTRY_NUM_PROPERTIES
};
static GParamSpec* rocker_widgets_app_entry_properties[ROCKER_WIDGETS_APP_ENTRY_NUM_PROPERTIES];
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
typedef struct _Block4Data Block4Data;

#define ROCKER_TYPE_SETTINGS (rocker_settings_get_type ())
#define ROCKER_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ROCKER_TYPE_SETTINGS, RockerSettings))
#define ROCKER_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ROCKER_TYPE_SETTINGS, RockerSettingsClass))
#define ROCKER_IS_SETTINGS(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ROCKER_TYPE_SETTINGS))
#define ROCKER_IS_SETTINGS_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ROCKER_TYPE_SETTINGS))
#define ROCKER_SETTINGS_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ROCKER_TYPE_SETTINGS, RockerSettingsClass))

typedef struct _RockerSettings RockerSettings;
typedef struct _RockerSettingsClass RockerSettingsClass;

#define ROCKER_TYPE_ROCKER_VIEW (rocker_rocker_view_get_type ())
#define ROCKER_ROCKER_VIEW(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), ROCKER_TYPE_ROCKER_VIEW, RockerRockerView))
#define ROCKER_ROCKER_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), ROCKER_TYPE_ROCKER_VIEW, RockerRockerViewClass))
#define ROCKER_IS_ROCKER_VIEW(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), ROCKER_TYPE_ROCKER_VIEW))
#define ROCKER_IS_ROCKER_VIEW_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), ROCKER_TYPE_ROCKER_VIEW))
#define ROCKER_ROCKER_VIEW_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), ROCKER_TYPE_ROCKER_VIEW, RockerRockerViewClass))

typedef struct _RockerRockerView RockerRockerView;
typedef struct _RockerRockerViewClass RockerRockerViewClass;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
typedef struct _Block5Data Block5Data;
#define _g_key_file_unref0(var) ((var == NULL) ? NULL : (var = (g_key_file_unref (var), NULL)))
enum  {
	ROCKER_WIDGETS_APP_ENTRY_APP_LAUNCHED_SIGNAL,
	ROCKER_WIDGETS_APP_ENTRY_NUM_SIGNALS
};
static guint rocker_widgets_app_entry_signals[ROCKER_WIDGETS_APP_ENTRY_NUM_SIGNALS] = {0};

struct _RockerWidgetsAppEntry {
	GtkButton parent_instance;
	RockerWidgetsAppEntryPrivate * priv;
	GtkLabel* app_label;
	gchar* desktop_uri;
	gchar* exec_name;
	gchar* app_name;
	gchar* desktop_id;
	gint icon_size;
	gchar* desktop_path;
	GFile* launchers_dir;
};

struct _RockerWidgetsAppEntryClass {
	GtkButtonClass parent_class;
};

struct _RockerWidgetsAppEntryPrivate {
	GdkPixbuf* icon;
	GtkImage* image;
	gboolean dragging;
	RockerBackendApp* application;
	RockerBackendAppSystem* app_system;
};

struct _Block4Data {
	int _ref_count_;
	RockerWidgetsAppEntry* self;
	RockerBackendApp* app;
};

struct _Block5Data {
	int _ref_count_;
	RockerWidgetsAppEntry* self;
	gchar* action;
};

static gint RockerWidgetsAppEntry_private_offset;
static gpointer rocker_widgets_app_entry_parent_class = NULL;
static GtkMenu* rocker_widgets_app_entry_menu;
static GtkMenu* rocker_widgets_app_entry_menu = NULL;
extern gint rocker_pixels_ITEM_SIZE;

GType rocker_widgets_app_entry_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (RockerWidgetsAppEntry, g_object_unref)
GType rocker_backend_app_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (RockerBackendApp, g_object_unref)
GType rocker_backend_app_system_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (RockerBackendAppSystem, g_object_unref)
RockerWidgetsAppEntry* rocker_widgets_app_entry_new (RockerBackendApp* app);
RockerWidgetsAppEntry* rocker_widgets_app_entry_construct (GType object_type,
                                                           RockerBackendApp* app);
static Block4Data* block4_data_ref (Block4Data* _data4_);
static void block4_data_unref (void * _userdata_);
const gchar* rocker_backend_app_get_desktop_id (RockerBackendApp* self);
const gchar* rocker_backend_app_get_desktop_path (RockerBackendApp* self);
const gchar* rocker_backend_app_get_name (RockerBackendApp* self);
const gchar* rocker_backend_app_get_description (RockerBackendApp* self);
const gchar* rocker_backend_app_get_exec (RockerBackendApp* self);
GType rocker_settings_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (RockerSettings, g_object_unref)
RockerSettings* rocker_rocker_get_settings (void);
gint rocker_settings_get_icon_size (RockerSettings* self);
GdkPixbuf* rocker_backend_app_get_icon (RockerBackendApp* self);
gdouble rocker_settings_get_font_size (RockerSettings* self);
void rocker_widgets_app_entry_launch_app (RockerWidgetsAppEntry* self);
static void _rocker_widgets_app_entry_launch_app_gtk_button_clicked (GtkButton* _sender,
                                                              gpointer self);
static gboolean __lambda23_ (RockerWidgetsAppEntry* self,
                      GdkEventButton* e);
static void rocker_widgets_app_entry_create_menu (RockerWidgetsAppEntry* self);
static gboolean ___lambda23__gtk_widget_button_press_event (GtkWidget* _sender,
                                                     GdkEventButton* event,
                                                     gpointer self);
static void __lambda29_ (RockerWidgetsAppEntry* self,
                  GdkDragContext* ctx);
static void ___lambda29__gtk_widget_drag_begin (GtkWidget* _sender,
                                         GdkDragContext* context,
                                         gpointer self);
static void __lambda30_ (RockerWidgetsAppEntry* self);
GType rocker_rocker_view_get_type (void) G_GNUC_CONST;
G_DEFINE_AUTOPTR_CLEANUP_FUNC (RockerRockerView, g_object_unref)
void rocker_rocker_view_grab_device (RockerRockerView* self);
static void ___lambda30__gtk_widget_drag_end (GtkWidget* _sender,
                                       GdkDragContext* context,
                                       gpointer self);
static void __lambda31_ (RockerWidgetsAppEntry* self,
                  GdkDragContext* ctx,
                  GtkSelectionData* sel,
                  guint info,
                  guint time);
static void ___lambda31__gtk_widget_drag_data_get (GtkWidget* _sender,
                                            GdkDragContext* context,
                                            GtkSelectionData* selection_data,
                                            guint info,
                                            guint time_,
                                            gpointer self);
static void __lambda32_ (Block4Data* _data4_);
static void ___lambda32__rocker_backend_app_icon_changed (RockerBackendApp* _sender,
                                                   gpointer self);
static void rocker_widgets_app_entry_real_get_preferred_width (GtkWidget* base,
                                                        gint* minimum_width,
                                                        gint* natural_width);
static void rocker_widgets_app_entry_real_get_preferred_height (GtkWidget* base,
                                                         gint* minimum_height,
                                                         gint* natural_height);
gboolean rocker_backend_app_launch (RockerBackendApp* self);
GeeArrayList* rocker_backend_app_get_actions (RockerBackendApp* self);
void rocker_backend_app_init_actions (RockerBackendApp* self,
                                      GError** error);
static void __lambda24_ (RockerWidgetsAppEntry* self);
static void ___lambda24__gtk_widget_hide (GtkWidget* _sender,
                                   gpointer self);
static Block5Data* block5_data_ref (Block5Data* _data5_);
static void block5_data_unref (void * _userdata_);
static void ____lambda26_ (Block5Data* _data5_);
GeeHashMap* rocker_backend_app_get_actions_map (RockerBackendApp* self);
static void _____lambda26__gtk_menu_item_activate (GtkMenuItem* _sender,
                                            gpointer self);
static GtkMenuItem* rocker_widgets_app_entry_get_saved_menuitem (RockerWidgetsAppEntry* self);
gboolean rocker_rocker_view_get_cat_saved (RockerRockerView* self);
static void rocker_widgets_app_entry_saved_menuitem_activate (RockerWidgetsAppEntry* self);
static void _rocker_widgets_app_entry_saved_menuitem_activate_gtk_menu_item_activate (GtkMenuItem* _sender,
                                                                               gpointer self);
static void rocker_widgets_app_entry_remove_saved_item (RockerWidgetsAppEntry* self);
static void rocker_widgets_app_entry_add_saved_item (RockerWidgetsAppEntry* self);
void rocker_rocker_view_add_saved (RockerRockerView* self,
                                   const gchar* app);
static void rocker_widgets_app_entry_finalize (GObject * obj);
static GType rocker_widgets_app_entry_get_type_once (void);
static void _vala_array_destroy (gpointer array,
                          gint array_length,
                          GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array,
                       gint array_length,
                       GDestroyNotify destroy_func);
static gint _vala_array_length (gpointer array);

static inline gpointer
rocker_widgets_app_entry_get_instance_private (RockerWidgetsAppEntry* self)
{
	return G_STRUCT_MEMBER_P (self, RockerWidgetsAppEntry_private_offset);
}

static gpointer
_g_object_ref0 (gpointer self)
{
	return self ? g_object_ref (self) : NULL;
}

static Block4Data*
block4_data_ref (Block4Data* _data4_)
{
	g_atomic_int_inc (&_data4_->_ref_count_);
	return _data4_;
}

static void
block4_data_unref (void * _userdata_)
{
	Block4Data* _data4_;
	_data4_ = (Block4Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data4_->_ref_count_)) {
		RockerWidgetsAppEntry* self;
		self = _data4_->self;
		_g_object_unref0 (_data4_->app);
		_g_object_unref0 (self);
		g_slice_free (Block4Data, _data4_);
	}
}

static void
_rocker_widgets_app_entry_launch_app_gtk_button_clicked (GtkButton* _sender,
                                                         gpointer self)
{
	rocker_widgets_app_entry_launch_app ((RockerWidgetsAppEntry*) self);
}

static gboolean
__lambda23_ (RockerWidgetsAppEntry* self,
             GdkEventButton* e)
{
	gboolean _tmp0_ = FALSE;
	GtkMenu* _tmp1_;
	gboolean result = FALSE;
	g_return_val_if_fail (e != NULL, FALSE);
	if (e->button != ((guint) GDK_BUTTON_SECONDARY)) {
		result = FALSE;
		return result;
	}
	rocker_widgets_app_entry_create_menu (self);
	_tmp1_ = rocker_widgets_app_entry_menu;
	if (_tmp1_ != NULL) {
		GtkMenu* _tmp2_;
		GList* _tmp3_;
		GList* _tmp4_;
		_tmp2_ = rocker_widgets_app_entry_menu;
		_tmp3_ = gtk_container_get_children ((GtkContainer*) _tmp2_);
		_tmp4_ = _tmp3_;
		_tmp0_ = _tmp4_ != NULL;
		(_tmp4_ == NULL) ? NULL : (_tmp4_ = (g_list_free (_tmp4_), NULL));
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		GtkMenu* _tmp5_;
		_tmp5_ = rocker_widgets_app_entry_menu;
		gtk_menu_popup (_tmp5_, NULL, NULL, NULL, NULL, e->button, e->time);
		result = TRUE;
		return result;
	}
	result = FALSE;
	return result;
}

static gboolean
___lambda23__gtk_widget_button_press_event (GtkWidget* _sender,
                                            GdkEventButton* event,
                                            gpointer self)
{
	gboolean result;
	result = __lambda23_ ((RockerWidgetsAppEntry*) self, event);
	return result;
}

static void
__lambda29_ (RockerWidgetsAppEntry* self,
             GdkDragContext* ctx)
{
	GdkPixbuf* _tmp0_;
	g_return_if_fail (ctx != NULL);
	self->priv->dragging = TRUE;
	_tmp0_ = self->priv->icon;
	gtk_drag_set_icon_pixbuf (ctx, _tmp0_, 0, 0);
}

static void
___lambda29__gtk_widget_drag_begin (GtkWidget* _sender,
                                    GdkDragContext* context,
                                    gpointer self)
{
	__lambda29_ ((RockerWidgetsAppEntry*) self, context);
}

static void
__lambda30_ (RockerWidgetsAppEntry* self)
{
	GtkApplication* rocker_app = NULL;
	GApplication* _tmp0_;
	GtkApplication* _tmp1_;
	GtkWindow* _tmp2_;
	GtkWindow* _tmp3_;
	self->priv->dragging = FALSE;
	_tmp0_ = g_application_get_default ();
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, gtk_application_get_type (), GtkApplication));
	rocker_app = _tmp1_;
	_tmp2_ = gtk_application_get_active_window (rocker_app);
	_tmp3_ = _tmp2_;
	rocker_rocker_view_grab_device (G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, ROCKER_TYPE_ROCKER_VIEW, RockerRockerView));
	_g_object_unref0 (rocker_app);
}

static void
___lambda30__gtk_widget_drag_end (GtkWidget* _sender,
                                  GdkDragContext* context,
                                  gpointer self)
{
	__lambda30_ ((RockerWidgetsAppEntry*) self);
}

static void
__lambda31_ (RockerWidgetsAppEntry* self,
             GdkDragContext* ctx,
             GtkSelectionData* sel,
             guint info,
             guint time)
{
	const gchar* _tmp0_;
	GFile* _tmp1_;
	GFile* _tmp2_;
	gchar* _tmp3_;
	gchar** _tmp4_;
	gchar** _tmp5_;
	gint _tmp5__length1;
	g_return_if_fail (ctx != NULL);
	g_return_if_fail (sel != NULL);
	_tmp0_ = self->desktop_path;
	_tmp1_ = g_file_new_for_path (_tmp0_);
	_tmp2_ = _tmp1_;
	_tmp3_ = g_file_get_uri (_tmp2_);
	_tmp4_ = g_new0 (gchar*, 1 + 1);
	_tmp4_[0] = _tmp3_;
	_tmp5_ = _tmp4_;
	_tmp5__length1 = 1;
	gtk_selection_data_set_uris (sel, _tmp5_);
	_tmp5_ = (_vala_array_free (_tmp5_, _tmp5__length1, (GDestroyNotify) g_free), NULL);
	_g_object_unref0 (_tmp2_);
}

static void
___lambda31__gtk_widget_drag_data_get (GtkWidget* _sender,
                                       GdkDragContext* context,
                                       GtkSelectionData* selection_data,
                                       guint info,
                                       guint time_,
                                       gpointer self)
{
	__lambda31_ ((RockerWidgetsAppEntry*) self, context, selection_data, info, time_);
}

static void
__lambda32_ (Block4Data* _data4_)
{
	RockerWidgetsAppEntry* self;
	GdkPixbuf* _tmp0_;
	GdkPixbuf* _tmp1_;
	GdkPixbuf* _tmp2_;
	GtkImage* _tmp3_;
	GdkPixbuf* _tmp4_;
	self = _data4_->self;
	_tmp0_ = rocker_backend_app_get_icon (_data4_->app);
	_tmp1_ = _tmp0_;
	_tmp2_ = _g_object_ref0 (_tmp1_);
	_g_object_unref0 (self->priv->icon);
	self->priv->icon = _tmp2_;
	_tmp3_ = self->priv->image;
	_tmp4_ = self->priv->icon;
	gtk_image_set_from_pixbuf (_tmp3_, _tmp4_);
}

static void
___lambda32__rocker_backend_app_icon_changed (RockerBackendApp* _sender,
                                              gpointer self)
{
	__lambda32_ (self);
}

RockerWidgetsAppEntry*
rocker_widgets_app_entry_construct (GType object_type,
                                    RockerBackendApp* app)
{
	RockerWidgetsAppEntry * self = NULL;
	Block4Data* _data4_;
	RockerBackendApp* _tmp0_;
	GtkTargetEntry dnd = {0};
	GtkTargetEntry _tmp1_ = {0};
	GtkTargetEntry _tmp2_;
	GtkTargetEntry* _tmp3_;
	GtkTargetEntry* _tmp4_;
	gint _tmp4__length1;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	gchar* _tmp7_;
	const gchar* _tmp8_;
	const gchar* _tmp9_;
	gchar* _tmp10_;
	RockerBackendApp* _tmp11_;
	const gchar* _tmp12_;
	const gchar* _tmp13_;
	gchar* _tmp14_;
	const gchar* _tmp15_;
	const gchar* _tmp16_;
	const gchar* _tmp17_;
	const gchar* _tmp18_;
	gchar* _tmp19_;
	RockerSettings* _tmp20_;
	RockerSettings* _tmp21_;
	gint _tmp22_;
	gint _tmp23_;
	GdkPixbuf* _tmp24_;
	GdkPixbuf* _tmp25_;
	GdkPixbuf* _tmp26_;
	GtkStyleContext* _tmp27_;
	RockerSettings* _tmp28_;
	RockerSettings* _tmp29_;
	gdouble _tmp30_;
	gdouble _tmp31_;
	GtkLabel* _tmp44_;
	GtkLabel* _tmp45_;
	GtkLabel* _tmp46_;
	GtkLabel* _tmp47_;
	GtkLabel* _tmp48_;
	GtkLabel* _tmp49_;
	GdkPixbuf* _tmp50_;
	GtkImage* _tmp51_;
	GtkImage* _tmp52_;
	GtkImage* _tmp53_;
	GtkGrid* grid = NULL;
	GtkGrid* _tmp54_;
	GtkImage* _tmp55_;
	GtkLabel* _tmp56_;
	g_return_val_if_fail (app != NULL, NULL);
	_data4_ = g_slice_new0 (Block4Data);
	_data4_->_ref_count_ = 1;
	_tmp0_ = _g_object_ref0 (app);
	_g_object_unref0 (_data4_->app);
	_data4_->app = _tmp0_;
	self = (RockerWidgetsAppEntry*) g_object_new (object_type, NULL);
	_data4_->self = g_object_ref (self);
	_tmp1_.target = "text/uri-list";
	_tmp1_.flags = (guint) 0;
	_tmp1_.info = (guint) 0;
	dnd = _tmp1_;
	_tmp2_ = dnd;
	_tmp3_ = g_new0 (GtkTargetEntry, 1);
	_tmp3_[0] = _tmp2_;
	_tmp4_ = _tmp3_;
	_tmp4__length1 = 1;
	gtk_drag_source_set ((GtkWidget*) self, GDK_BUTTON1_MASK, _tmp4_, (gint) 1, GDK_ACTION_COPY);
	_tmp4_ = (g_free (_tmp4_), NULL);
	_tmp5_ = rocker_backend_app_get_desktop_id (_data4_->app);
	_tmp6_ = _tmp5_;
	_tmp7_ = g_strdup (_tmp6_);
	_g_free0 (self->desktop_id);
	self->desktop_id = _tmp7_;
	_tmp8_ = rocker_backend_app_get_desktop_path (_data4_->app);
	_tmp9_ = _tmp8_;
	_tmp10_ = g_strdup (_tmp9_);
	_g_free0 (self->desktop_path);
	self->desktop_path = _tmp10_;
	_tmp11_ = _g_object_ref0 (_data4_->app);
	_g_object_unref0 (self->priv->application);
	self->priv->application = _tmp11_;
	_tmp12_ = rocker_backend_app_get_name (_data4_->app);
	_tmp13_ = _tmp12_;
	_tmp14_ = g_strdup (_tmp13_);
	_g_free0 (self->app_name);
	self->app_name = _tmp14_;
	_tmp15_ = rocker_backend_app_get_description (_data4_->app);
	_tmp16_ = _tmp15_;
	gtk_widget_set_tooltip_text ((GtkWidget*) self, _tmp16_);
	_tmp17_ = rocker_backend_app_get_exec (_data4_->app);
	_tmp18_ = _tmp17_;
	_tmp19_ = g_strdup (_tmp18_);
	_g_free0 (self->exec_name);
	self->exec_name = _tmp19_;
	_tmp20_ = rocker_rocker_get_settings ();
	_tmp21_ = _tmp20_;
	_tmp22_ = rocker_settings_get_icon_size (_tmp21_);
	_tmp23_ = _tmp22_;
	self->icon_size = _tmp23_;
	_tmp24_ = rocker_backend_app_get_icon (_data4_->app);
	_tmp25_ = _tmp24_;
	_tmp26_ = _g_object_ref0 (_tmp25_);
	_g_object_unref0 (self->priv->icon);
	self->priv->icon = _tmp26_;
	_tmp27_ = gtk_widget_get_style_context ((GtkWidget*) self);
	gtk_style_context_add_class (_tmp27_, GTK_STYLE_CLASS_FLAT);
	_tmp28_ = rocker_rocker_get_settings ();
	_tmp29_ = _tmp28_;
	_tmp30_ = rocker_settings_get_font_size (_tmp29_);
	_tmp31_ = _tmp30_;
	if (_tmp31_ <= 0.001) {
		const gchar* _tmp32_;
		GtkLabel* _tmp33_;
		GtkLabel* _tmp34_;
		_tmp32_ = self->app_name;
		_tmp33_ = (GtkLabel*) gtk_label_new (_tmp32_);
		g_object_ref_sink (_tmp33_);
		_g_object_unref0 (self->app_label);
		self->app_label = _tmp33_;
		_tmp34_ = self->app_label;
		gtk_label_set_use_markup (_tmp34_, FALSE);
	} else {
		gchar* texto = NULL;
		RockerSettings* _tmp35_;
		RockerSettings* _tmp36_;
		gdouble _tmp37_;
		gdouble _tmp38_;
		const gchar* _tmp39_;
		gchar* _tmp40_;
		GtkLabel* _tmp41_;
		GtkLabel* _tmp42_;
		const gchar* _tmp43_;
		_tmp35_ = rocker_rocker_get_settings ();
		_tmp36_ = _tmp35_;
		_tmp37_ = rocker_settings_get_font_size (_tmp36_);
		_tmp38_ = _tmp37_;
		_tmp39_ = self->app_name;
		_tmp40_ = g_strdup_printf ("<span font_size=\"%d\">%s</span>", (gint) (_tmp38_ * 1000), _tmp39_);
		texto = _tmp40_;
		_tmp41_ = (GtkLabel*) gtk_label_new (NULL);
		g_object_ref_sink (_tmp41_);
		_g_object_unref0 (self->app_label);
		self->app_label = _tmp41_;
		_tmp42_ = self->app_label;
		_tmp43_ = texto;
		gtk_label_set_markup (_tmp42_, _tmp43_);
		_g_free0 (texto);
	}
	_tmp44_ = self->app_label;
	gtk_widget_set_halign ((GtkWidget*) _tmp44_, GTK_ALIGN_CENTER);
	_tmp45_ = self->app_label;
	gtk_label_set_justify (_tmp45_, GTK_JUSTIFY_CENTER);
	_tmp46_ = self->app_label;
	gtk_label_set_line_wrap (_tmp46_, TRUE);
	_tmp47_ = self->app_label;
	gtk_label_set_lines (_tmp47_, 2);
	_tmp48_ = self->app_label;
	gtk_label_set_single_line_mode (_tmp48_, FALSE);
	_tmp49_ = self->app_label;
	gtk_label_set_ellipsize (_tmp49_, PANGO_ELLIPSIZE_END);
	_tmp50_ = self->priv->icon;
	_tmp51_ = (GtkImage*) gtk_image_new_from_pixbuf (_tmp50_);
	g_object_ref_sink (_tmp51_);
	_g_object_unref0 (self->priv->image);
	self->priv->image = _tmp51_;
	_tmp52_ = self->priv->image;
	g_object_set (_tmp52_, "icon-size", self->icon_size, NULL);
	_tmp53_ = self->priv->image;
	gtk_widget_set_margin_top ((GtkWidget*) _tmp53_, 12);
	_tmp54_ = (GtkGrid*) gtk_grid_new ();
	g_object_ref_sink (_tmp54_);
	grid = _tmp54_;
	gtk_orientable_set_orientation ((GtkOrientable*) grid, GTK_ORIENTATION_VERTICAL);
	gtk_grid_set_row_spacing (grid, 6);
	g_object_set ((GtkWidget*) grid, "expand", TRUE, NULL);
	gtk_widget_set_halign ((GtkWidget*) grid, GTK_ALIGN_CENTER);
	_tmp55_ = self->priv->image;
	gtk_container_add ((GtkContainer*) grid, (GtkWidget*) _tmp55_);
	_tmp56_ = self->app_label;
	gtk_container_add ((GtkContainer*) grid, (GtkWidget*) _tmp56_);
	gtk_container_add ((GtkContainer*) self, (GtkWidget*) grid);
	gtk_widget_set_size_request ((GtkWidget*) self, rocker_pixels_ITEM_SIZE, rocker_pixels_ITEM_SIZE);
	g_signal_connect_object ((GtkButton*) self, "clicked", (GCallback) _rocker_widgets_app_entry_launch_app_gtk_button_clicked, self, 0);
	g_signal_connect_object ((GtkWidget*) self, "button-press-event", (GCallback) ___lambda23__gtk_widget_button_press_event, self, 0);
	g_signal_connect_object ((GtkWidget*) self, "drag-begin", (GCallback) ___lambda29__gtk_widget_drag_begin, self, 0);
	g_signal_connect_object ((GtkWidget*) self, "drag-end", (GCallback) ___lambda30__gtk_widget_drag_end, self, 0);
	g_signal_connect_object ((GtkWidget*) self, "drag-data-get", (GCallback) ___lambda31__gtk_widget_drag_data_get, self, 0);
	g_signal_connect_data (_data4_->app, "icon-changed", (GCallback) ___lambda32__rocker_backend_app_icon_changed, block4_data_ref (_data4_), (GClosureNotify) block4_data_unref, 0);
	_g_object_unref0 (grid);
	block4_data_unref (_data4_);
	_data4_ = NULL;
	return self;
}

RockerWidgetsAppEntry*
rocker_widgets_app_entry_new (RockerBackendApp* app)
{
	return rocker_widgets_app_entry_construct (ROCKER_WIDGETS_TYPE_APP_ENTRY, app);
}

static void
rocker_widgets_app_entry_real_get_preferred_width (GtkWidget* base,
                                                   gint* minimum_width,
                                                   gint* natural_width)
{
	RockerWidgetsAppEntry * self;
	gint _vala_minimum_width = 0;
	gint _vala_natural_width = 0;
	self = (RockerWidgetsAppEntry*) base;
	_vala_minimum_width = rocker_pixels_ITEM_SIZE;
	_vala_natural_width = rocker_pixels_ITEM_SIZE;
	if (minimum_width) {
		*minimum_width = _vala_minimum_width;
	}
	if (natural_width) {
		*natural_width = _vala_natural_width;
	}
}

static void
rocker_widgets_app_entry_real_get_preferred_height (GtkWidget* base,
                                                    gint* minimum_height,
                                                    gint* natural_height)
{
	RockerWidgetsAppEntry * self;
	gint _vala_minimum_height = 0;
	gint _vala_natural_height = 0;
	self = (RockerWidgetsAppEntry*) base;
	_vala_minimum_height = rocker_pixels_ITEM_SIZE;
	_vala_natural_height = rocker_pixels_ITEM_SIZE;
	if (minimum_height) {
		*minimum_height = _vala_minimum_height;
	}
	if (natural_height) {
		*natural_height = _vala_natural_height;
	}
}

void
rocker_widgets_app_entry_launch_app (RockerWidgetsAppEntry* self)
{
	RockerBackendApp* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->application;
	rocker_backend_app_launch (_tmp0_);
	g_signal_emit (self, rocker_widgets_app_entry_signals[ROCKER_WIDGETS_APP_ENTRY_APP_LAUNCHED_SIGNAL], 0);
}

static void
__lambda24_ (RockerWidgetsAppEntry* self)
{
	GtkApplication* rocker_app = NULL;
	GApplication* _tmp0_;
	GtkApplication* _tmp1_;
	GtkWindow* _tmp2_;
	GtkWindow* _tmp3_;
	_tmp0_ = g_application_get_default ();
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, gtk_application_get_type (), GtkApplication));
	rocker_app = _tmp1_;
	_tmp2_ = gtk_application_get_active_window (rocker_app);
	_tmp3_ = _tmp2_;
	rocker_rocker_view_grab_device (G_TYPE_CHECK_INSTANCE_CAST (_tmp3_, ROCKER_TYPE_ROCKER_VIEW, RockerRockerView));
	_g_object_unref0 (rocker_app);
}

static void
___lambda24__gtk_widget_hide (GtkWidget* _sender,
                              gpointer self)
{
	__lambda24_ ((RockerWidgetsAppEntry*) self);
}

static Block5Data*
block5_data_ref (Block5Data* _data5_)
{
	g_atomic_int_inc (&_data5_->_ref_count_);
	return _data5_;
}

static void
block5_data_unref (void * _userdata_)
{
	Block5Data* _data5_;
	_data5_ = (Block5Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data5_->_ref_count_)) {
		RockerWidgetsAppEntry* self;
		self = _data5_->self;
		_g_free0 (_data5_->action);
		_g_object_unref0 (self);
		g_slice_free (Block5Data, _data5_);
	}
}

static void
____lambda26_ (Block5Data* _data5_)
{
	RockerWidgetsAppEntry* self;
	GError* _inner_error0_ = NULL;
	self = _data5_->self;
	{
		gchar** values = NULL;
		RockerBackendApp* _tmp0_;
		GeeHashMap* _tmp1_;
		GeeHashMap* _tmp2_;
		const gchar* _tmp3_;
		gpointer _tmp4_;
		gchar* _tmp5_;
		gchar** _tmp6_;
		gchar** _tmp7_;
		gchar** _tmp8_;
		gint _tmp8__length1;
		gint values_length1;
		gint _values_size_;
		GAppInfo* _tmp9_ = NULL;
		gchar** _tmp10_;
		gint _tmp10__length1;
		const gchar* _tmp11_;
		GAppInfo* _tmp12_;
		_tmp0_ = self->priv->application;
		_tmp1_ = rocker_backend_app_get_actions_map (_tmp0_);
		_tmp2_ = _tmp1_;
		_tmp3_ = _data5_->action;
		_tmp4_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp2_, _tmp3_);
		_tmp5_ = (gchar*) _tmp4_;
		_tmp7_ = _tmp6_ = g_strsplit (_tmp5_, ";;", 0);
		_tmp8_ = _tmp7_;
		_tmp8__length1 = _vala_array_length (_tmp6_);
		_g_free0 (_tmp5_);
		values = _tmp8_;
		values_length1 = _tmp8__length1;
		_values_size_ = values_length1;
		_tmp10_ = values;
		_tmp10__length1 = values_length1;
		_tmp11_ = _tmp10_[0];
		_tmp12_ = g_app_info_create_from_commandline (_tmp11_, NULL, G_APP_INFO_CREATE_NONE, &_inner_error0_);
		_tmp9_ = _tmp12_;
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			values = (_vala_array_free (values, values_length1, (GDestroyNotify) g_free), NULL);
			goto __catch0_g_error;
		}
		g_app_info_launch (_tmp9_, NULL, NULL, &_inner_error0_);
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			_g_object_unref0 (_tmp9_);
			values = (_vala_array_free (values, values_length1, (GDestroyNotify) g_free), NULL);
			goto __catch0_g_error;
		}
		g_signal_emit (self, rocker_widgets_app_entry_signals[ROCKER_WIDGETS_APP_ENTRY_APP_LAUNCHED_SIGNAL], 0);
		_g_object_unref0 (_tmp9_);
		values = (_vala_array_free (values, values_length1, (GDestroyNotify) g_free), NULL);
	}
	goto __finally0;
	__catch0_g_error:
	{
		GError* e = NULL;
		const gchar* _tmp13_;
		GError* _tmp14_;
		const gchar* _tmp15_;
		e = _inner_error0_;
		_inner_error0_ = NULL;
		_tmp13_ = self->desktop_path;
		_tmp14_ = e;
		_tmp15_ = _tmp14_->message;
		g_critical ("AppEntry.vala:170: %s: %s", _tmp13_, _tmp15_);
		_g_error_free0 (e);
	}
	__finally0:
	if (G_UNLIKELY (_inner_error0_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
		g_clear_error (&_inner_error0_);
		return;
	}
}

static void
_____lambda26__gtk_menu_item_activate (GtkMenuItem* _sender,
                                       gpointer self)
{
	____lambda26_ (self);
}

static void
rocker_widgets_app_entry_create_menu (RockerWidgetsAppEntry* self)
{
	RockerBackendApp* _tmp0_;
	GeeArrayList* _tmp1_;
	GeeArrayList* _tmp2_;
	GtkMenu* _tmp7_;
	GtkMenu* _tmp8_;
	GtkMenu* _tmp25_;
	GList* _tmp26_;
	GList* _tmp27_;
	gboolean _tmp28_;
	GtkMenu* _tmp32_;
	GtkMenuItem* _tmp33_;
	GtkMenuItem* _tmp34_;
	GtkMenu* _tmp35_;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->application;
	_tmp1_ = rocker_backend_app_get_actions (_tmp0_);
	_tmp2_ = _tmp1_;
	if (_tmp2_ == NULL) {
		{
			RockerBackendApp* _tmp3_;
			_tmp3_ = self->priv->application;
			rocker_backend_app_init_actions (_tmp3_, &_inner_error0_);
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
				if (_inner_error0_->domain == G_KEY_FILE_ERROR) {
					goto __catch0_g_key_file_error;
				}
				g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
				g_clear_error (&_inner_error0_);
				return;
			}
		}
		goto __finally0;
		__catch0_g_key_file_error:
		{
			GError* e = NULL;
			const gchar* _tmp4_;
			GError* _tmp5_;
			const gchar* _tmp6_;
			e = _inner_error0_;
			_inner_error0_ = NULL;
			_tmp4_ = self->desktop_path;
			_tmp5_ = e;
			_tmp6_ = _tmp5_->message;
			g_critical ("AppEntry.vala:150: %s: %s", _tmp4_, _tmp6_);
			_g_error_free0 (e);
		}
		__finally0:
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
			g_clear_error (&_inner_error0_);
			return;
		}
	}
	_tmp7_ = (GtkMenu*) gtk_menu_new ();
	g_object_ref_sink (_tmp7_);
	_g_object_unref0 (rocker_widgets_app_entry_menu);
	rocker_widgets_app_entry_menu = _tmp7_;
	_tmp8_ = rocker_widgets_app_entry_menu;
	g_signal_connect_object ((GtkWidget*) _tmp8_, "hide", (GCallback) ___lambda24__gtk_widget_hide, self, 0);
	{
		GeeArrayList* _action_list = NULL;
		RockerBackendApp* _tmp9_;
		GeeArrayList* _tmp10_;
		GeeArrayList* _tmp11_;
		GeeArrayList* _tmp12_;
		gint _action_size = 0;
		GeeArrayList* _tmp13_;
		gint _tmp14_;
		gint _tmp15_;
		gint _action_index = 0;
		_tmp9_ = self->priv->application;
		_tmp10_ = rocker_backend_app_get_actions (_tmp9_);
		_tmp11_ = _tmp10_;
		_tmp12_ = _g_object_ref0 (_tmp11_);
		_action_list = _tmp12_;
		_tmp13_ = _action_list;
		_tmp14_ = gee_abstract_collection_get_size ((GeeAbstractCollection*) _tmp13_);
		_tmp15_ = _tmp14_;
		_action_size = _tmp15_;
		_action_index = -1;
		while (TRUE) {
			Block5Data* _data5_;
			gint _tmp16_;
			gint _tmp17_;
			GeeArrayList* _tmp18_;
			gpointer _tmp19_;
			GtkMenuItem* menuitem = NULL;
			const gchar* _tmp20_;
			GtkMenuItem* _tmp21_;
			GtkMenu* _tmp22_;
			GtkMenuItem* _tmp23_;
			GtkMenuItem* _tmp24_;
			_data5_ = g_slice_new0 (Block5Data);
			_data5_->_ref_count_ = 1;
			_data5_->self = g_object_ref (self);
			_action_index = _action_index + 1;
			_tmp16_ = _action_index;
			_tmp17_ = _action_size;
			if (!(_tmp16_ < _tmp17_)) {
				block5_data_unref (_data5_);
				_data5_ = NULL;
				break;
			}
			_tmp18_ = _action_list;
			_tmp19_ = gee_abstract_list_get ((GeeAbstractList*) _tmp18_, _action_index);
			_data5_->action = (gchar*) _tmp19_;
			_tmp20_ = _data5_->action;
			_tmp21_ = (GtkMenuItem*) gtk_menu_item_new_with_mnemonic (_tmp20_);
			g_object_ref_sink (_tmp21_);
			menuitem = _tmp21_;
			_tmp22_ = rocker_widgets_app_entry_menu;
			_tmp23_ = menuitem;
			gtk_container_add ((GtkContainer*) _tmp22_, (GtkWidget*) _tmp23_);
			_tmp24_ = menuitem;
			g_signal_connect_data (_tmp24_, "activate", (GCallback) _____lambda26__gtk_menu_item_activate, block5_data_ref (_data5_), (GClosureNotify) block5_data_unref, 0);
			_g_object_unref0 (menuitem);
			block5_data_unref (_data5_);
			_data5_ = NULL;
		}
		_g_object_unref0 (_action_list);
	}
	_tmp25_ = rocker_widgets_app_entry_menu;
	_tmp26_ = gtk_container_get_children ((GtkContainer*) _tmp25_);
	_tmp27_ = _tmp26_;
	_tmp28_ = g_list_length (_tmp27_) > ((guint) 0);
	(_tmp27_ == NULL) ? NULL : (_tmp27_ = (g_list_free (_tmp27_), NULL));
	if (_tmp28_) {
		GtkMenu* _tmp29_;
		GtkSeparatorMenuItem* _tmp30_;
		GtkSeparatorMenuItem* _tmp31_;
		_tmp29_ = rocker_widgets_app_entry_menu;
		_tmp30_ = (GtkSeparatorMenuItem*) gtk_separator_menu_item_new ();
		g_object_ref_sink (_tmp30_);
		_tmp31_ = _tmp30_;
		gtk_container_add ((GtkContainer*) _tmp29_, (GtkWidget*) _tmp31_);
		_g_object_unref0 (_tmp31_);
	}
	_tmp32_ = rocker_widgets_app_entry_menu;
	_tmp33_ = rocker_widgets_app_entry_get_saved_menuitem (self);
	_tmp34_ = _tmp33_;
	gtk_container_add ((GtkContainer*) _tmp32_, (GtkWidget*) _tmp34_);
	_g_object_unref0 (_tmp34_);
	_tmp35_ = rocker_widgets_app_entry_menu;
	gtk_widget_show_all ((GtkWidget*) _tmp35_);
}

static void
_rocker_widgets_app_entry_saved_menuitem_activate_gtk_menu_item_activate (GtkMenuItem* _sender,
                                                                          gpointer self)
{
	rocker_widgets_app_entry_saved_menuitem_activate ((RockerWidgetsAppEntry*) self);
}

static GtkMenuItem*
rocker_widgets_app_entry_get_saved_menuitem (RockerWidgetsAppEntry* self)
{
	GtkApplication* rocker_app = NULL;
	GApplication* _tmp0_;
	GtkApplication* _tmp1_;
	gboolean saved = FALSE;
	GtkApplication* _tmp2_;
	GtkWindow* _tmp3_;
	GtkWindow* _tmp4_;
	gboolean _tmp5_;
	gboolean _tmp6_;
	GtkMenuItem* saved_menuitem = NULL;
	GtkMenuItem* _tmp7_;
	GtkMenuItem* _tmp8_;
	const gchar* _tmp9_;
	GtkMenuItem* _tmp12_;
	GtkMenuItem* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = g_application_get_default ();
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, gtk_application_get_type (), GtkApplication));
	rocker_app = _tmp1_;
	_tmp2_ = rocker_app;
	_tmp3_ = gtk_application_get_active_window (_tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = rocker_rocker_view_get_cat_saved (G_TYPE_CHECK_INSTANCE_CAST (_tmp4_, ROCKER_TYPE_ROCKER_VIEW, RockerRockerView));
	_tmp6_ = _tmp5_;
	saved = _tmp6_;
	_tmp7_ = (GtkMenuItem*) gtk_menu_item_new ();
	g_object_ref_sink (_tmp7_);
	saved_menuitem = _tmp7_;
	_tmp8_ = saved_menuitem;
	gtk_menu_item_set_use_underline (_tmp8_, TRUE);
	_tmp9_ = self->desktop_uri;
	g_warning ("AppEntry.vala:190: %s", _tmp9_);
	if (saved) {
		GtkMenuItem* _tmp10_;
		_tmp10_ = saved_menuitem;
		gtk_menu_item_set_label (_tmp10_, _ ("Remove from _Saved"));
	} else {
		GtkMenuItem* _tmp11_;
		_tmp11_ = saved_menuitem;
		gtk_menu_item_set_label (_tmp11_, _ ("Add to Saved"));
	}
	_tmp12_ = saved_menuitem;
	g_signal_connect_object (_tmp12_, "activate", (GCallback) _rocker_widgets_app_entry_saved_menuitem_activate_gtk_menu_item_activate, self, 0);
	result = saved_menuitem;
	_g_object_unref0 (rocker_app);
	return result;
}

static void
rocker_widgets_app_entry_saved_menuitem_activate (RockerWidgetsAppEntry* self)
{
	GtkApplication* rocker_app = NULL;
	GApplication* _tmp0_;
	GtkApplication* _tmp1_;
	gboolean saved = FALSE;
	GtkApplication* _tmp2_;
	GtkWindow* _tmp3_;
	GtkWindow* _tmp4_;
	gboolean _tmp5_;
	gboolean _tmp6_;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_application_get_default ();
	_tmp1_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp0_, gtk_application_get_type (), GtkApplication));
	rocker_app = _tmp1_;
	_tmp2_ = rocker_app;
	_tmp3_ = gtk_application_get_active_window (_tmp2_);
	_tmp4_ = _tmp3_;
	_tmp5_ = rocker_rocker_view_get_cat_saved (G_TYPE_CHECK_INSTANCE_CAST (_tmp4_, ROCKER_TYPE_ROCKER_VIEW, RockerRockerView));
	_tmp6_ = _tmp5_;
	saved = _tmp6_;
	if (saved) {
		rocker_widgets_app_entry_remove_saved_item (self);
	} else {
		rocker_widgets_app_entry_add_saved_item (self);
	}
	_g_object_unref0 (rocker_app);
}

static gint
string_last_index_of (const gchar* self,
                      const gchar* needle,
                      gint start_index)
{
	gchar* _result_ = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
	gint result = 0;
	g_return_val_if_fail (self != NULL, 0);
	g_return_val_if_fail (needle != NULL, 0);
	_tmp0_ = g_strrstr (((gchar*) self) + start_index, (gchar*) needle);
	_result_ = _tmp0_;
	_tmp1_ = _result_;
	if (_tmp1_ != NULL) {
		gchar* _tmp2_;
		_tmp2_ = _result_;
		result = (gint) (_tmp2_ - ((gchar*) self));
		return result;
	} else {
		result = -1;
		return result;
	}
}

static gchar*
string_slice (const gchar* self,
              glong start,
              glong end)
{
	glong string_length = 0L;
	gint _tmp0_;
	gint _tmp1_;
	gboolean _tmp2_ = FALSE;
	gboolean _tmp3_ = FALSE;
	gchar* _tmp4_;
	gchar* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = strlen (self);
	_tmp1_ = _tmp0_;
	string_length = (glong) _tmp1_;
	if (start < ((glong) 0)) {
		start = string_length + start;
	}
	if (end < ((glong) 0)) {
		end = string_length + end;
	}
	if (start >= ((glong) 0)) {
		_tmp2_ = start <= string_length;
	} else {
		_tmp2_ = FALSE;
	}
	g_return_val_if_fail (_tmp2_, NULL);
	if (end >= ((glong) 0)) {
		_tmp3_ = end <= string_length;
	} else {
		_tmp3_ = FALSE;
	}
	g_return_val_if_fail (_tmp3_, NULL);
	g_return_val_if_fail (start <= end, NULL);
	_tmp4_ = g_strndup (((gchar*) self) + start, (gsize) (end - start));
	result = _tmp4_;
	return result;
}

static void
rocker_widgets_app_entry_add_saved_item (RockerWidgetsAppEntry* self)
{
	gchar* uri = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	GFile* target_dir = NULL;
	GFile* _tmp2_;
	gboolean is_valid = FALSE;
	gchar* basename = NULL;
	GFile* launcher_file = NULL;
	const gchar* _tmp15_;
	GFile* _tmp16_;
	GFile* _tmp17_;
	gchar* _tmp18_ = NULL;
	GFile* _tmp19_;
	gchar* _tmp20_;
	gchar* _tmp22_;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->desktop_uri;
	_tmp1_ = g_strdup (_tmp0_);
	uri = _tmp1_;
	target_dir = NULL;
	_tmp2_ = target_dir;
	if (_tmp2_ == NULL) {
		const gchar* _tmp3_;
		gchar* _tmp4_;
		gchar* _tmp5_;
		GFile* _tmp6_;
		GFile* _tmp7_;
		_tmp3_ = g_get_user_config_dir ();
		_tmp4_ = g_strconcat (_tmp3_, "/rocker/saved/", NULL);
		_tmp5_ = _tmp4_;
		_tmp6_ = g_file_new_for_path (_tmp5_);
		_g_object_unref0 (target_dir);
		target_dir = _tmp6_;
		_g_free0 (_tmp5_);
		_tmp7_ = target_dir;
		if (!g_file_query_exists (_tmp7_, NULL)) {
			{
				GFile* _tmp8_;
				_tmp8_ = target_dir;
				g_file_make_directory_with_parents (_tmp8_, NULL, &_inner_error0_);
				if (G_UNLIKELY (_inner_error0_ != NULL)) {
					goto __catch0_g_error;
				}
			}
			goto __finally0;
			__catch0_g_error:
			{
				GError* e = NULL;
				gchar* _tmp9_ = NULL;
				GFile* _tmp10_;
				gchar* _tmp11_;
				GError* _tmp13_;
				const gchar* _tmp14_;
				e = _inner_error0_;
				_inner_error0_ = NULL;
				_tmp10_ = target_dir;
				_tmp11_ = g_file_get_path (_tmp10_);
				_tmp9_ = _tmp11_;
				if (_tmp9_ == NULL) {
					gchar* _tmp12_;
					_tmp12_ = g_strdup ("");
					_g_free0 (_tmp9_);
					_tmp9_ = _tmp12_;
				}
				_tmp13_ = e;
				_tmp14_ = _tmp13_->message;
				g_critical ("AppEntry.vala:224: Could not access or create the directory '%s'. (%s)", _tmp9_, _tmp14_);
				_g_free0 (_tmp9_);
				_g_error_free0 (e);
			}
			__finally0:
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
				_g_object_unref0 (target_dir);
				_g_free0 (uri);
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
				g_clear_error (&_inner_error0_);
				return;
			}
		}
	}
	is_valid = FALSE;
	_tmp15_ = uri;
	_tmp16_ = g_file_new_for_uri (_tmp15_);
	launcher_file = _tmp16_;
	_tmp17_ = launcher_file;
	is_valid = g_file_query_exists (_tmp17_, NULL);
	_tmp19_ = launcher_file;
	_tmp20_ = g_file_get_basename (_tmp19_);
	_tmp18_ = _tmp20_;
	if (_tmp18_ == NULL) {
		gchar* _tmp21_;
		_tmp21_ = g_strdup ("unknown");
		_g_free0 (_tmp18_);
		_tmp18_ = _tmp21_;
	}
	_tmp22_ = _tmp18_;
	_tmp18_ = NULL;
	_g_free0 (basename);
	basename = _tmp22_;
	if (is_valid) {
		GKeyFile* file = NULL;
		GKeyFile* _tmp23_;
		_tmp23_ = g_key_file_new ();
		file = _tmp23_;
		{
			gint index_of_last_dot = 0;
			const gchar* _tmp24_;
			gchar* _tmp25_ = NULL;
			gchar* launcher_base = NULL;
			gchar* _tmp30_;
			gchar* dockitem = NULL;
			const gchar* _tmp31_;
			gchar* _tmp32_;
			GFile* dockitem_file = NULL;
			GFile* _tmp33_;
			const gchar* _tmp34_;
			GFile* _tmp35_;
			gint counter = 0;
			GFile* _tmp36_;
			_tmp24_ = basename;
			index_of_last_dot = string_last_index_of (_tmp24_, ".", 0);
			if (index_of_last_dot >= 0) {
				const gchar* _tmp26_;
				gchar* _tmp27_;
				_tmp26_ = basename;
				_tmp27_ = string_slice (_tmp26_, (glong) 0, (glong) index_of_last_dot);
				_g_free0 (_tmp25_);
				_tmp25_ = _tmp27_;
			} else {
				const gchar* _tmp28_;
				gchar* _tmp29_;
				_tmp28_ = basename;
				_tmp29_ = g_strdup (_tmp28_);
				_g_free0 (_tmp25_);
				_tmp25_ = _tmp29_;
			}
			_tmp30_ = g_strdup (_tmp25_);
			launcher_base = _tmp30_;
			_tmp31_ = launcher_base;
			_tmp32_ = g_strdup_printf ("%s.saveditem", _tmp31_);
			dockitem = _tmp32_;
			_tmp33_ = target_dir;
			_tmp34_ = dockitem;
			_tmp35_ = g_file_get_child (_tmp33_, _tmp34_);
			dockitem_file = _tmp35_;
			counter = 1;
			_tmp36_ = dockitem_file;
			if (!g_file_query_exists (_tmp36_, NULL)) {
				GFileOutputStream* _tmp37_ = NULL;
				GFile* _tmp38_;
				GFileOutputStream* _tmp39_;
				GDataOutputStream* stream = NULL;
				GDataOutputStream* _tmp40_;
				GDataOutputStream* _tmp41_;
				GKeyFile* _tmp42_;
				gchar* _tmp43_;
				gchar* _tmp44_;
				GDataOutputStream* _tmp45_;
				GtkApplication* rocker_app = NULL;
				GApplication* _tmp46_;
				GtkApplication* _tmp47_;
				GtkApplication* _tmp48_;
				GtkWindow* _tmp49_;
				GtkWindow* _tmp50_;
				const gchar* _tmp51_;
				_tmp38_ = dockitem_file;
				_tmp39_ = g_file_create (_tmp38_, G_FILE_CREATE_NONE, NULL, &_inner_error0_);
				_tmp37_ = _tmp39_;
				if (G_UNLIKELY (_inner_error0_ != NULL)) {
					_g_object_unref0 (dockitem_file);
					_g_free0 (dockitem);
					_g_free0 (launcher_base);
					_g_free0 (_tmp25_);
					goto __catch1_g_error;
				}
				_tmp40_ = g_data_output_stream_new ((GOutputStream*) _tmp37_);
				stream = _tmp40_;
				_tmp41_ = stream;
				_tmp42_ = file;
				_tmp43_ = g_key_file_to_data (_tmp42_, NULL, NULL);
				_tmp44_ = _tmp43_;
				g_data_output_stream_put_string (_tmp41_, _tmp44_, NULL, &_inner_error0_);
				_g_free0 (_tmp44_);
				if (G_UNLIKELY (_inner_error0_ != NULL)) {
					_g_object_unref0 (stream);
					_g_object_unref0 (_tmp37_);
					_g_object_unref0 (dockitem_file);
					_g_free0 (dockitem);
					_g_free0 (launcher_base);
					_g_free0 (_tmp25_);
					goto __catch1_g_error;
				}
				_tmp45_ = stream;
				g_output_stream_close ((GOutputStream*) _tmp45_, NULL, &_inner_error0_);
				if (G_UNLIKELY (_inner_error0_ != NULL)) {
					_g_object_unref0 (stream);
					_g_object_unref0 (_tmp37_);
					_g_object_unref0 (dockitem_file);
					_g_free0 (dockitem);
					_g_free0 (launcher_base);
					_g_free0 (_tmp25_);
					goto __catch1_g_error;
				}
				_tmp46_ = g_application_get_default ();
				_tmp47_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp46_, gtk_application_get_type (), GtkApplication));
				rocker_app = _tmp47_;
				_tmp48_ = rocker_app;
				_tmp49_ = gtk_application_get_active_window (_tmp48_);
				_tmp50_ = _tmp49_;
				_tmp51_ = basename;
				rocker_rocker_view_add_saved (G_TYPE_CHECK_INSTANCE_CAST (_tmp50_, ROCKER_TYPE_ROCKER_VIEW, RockerRockerView), _tmp51_);
				_g_object_unref0 (rocker_app);
				_g_object_unref0 (stream);
				_g_object_unref0 (_tmp37_);
			}
			_g_object_unref0 (dockitem_file);
			_g_free0 (dockitem);
			_g_free0 (launcher_base);
			_g_free0 (_tmp25_);
		}
		goto __finally1;
		__catch1_g_error:
		{
			GError* e = NULL;
			GError* _tmp52_;
			const gchar* _tmp53_;
			e = _inner_error0_;
			_inner_error0_ = NULL;
			_tmp52_ = e;
			_tmp53_ = _tmp52_->message;
			g_warning ("AppEntry.vala:256: %s", _tmp53_);
			_g_error_free0 (e);
		}
		__finally1:
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			_g_key_file_unref0 (file);
			_g_free0 (_tmp18_);
			_g_object_unref0 (launcher_file);
			_g_free0 (basename);
			_g_object_unref0 (target_dir);
			_g_free0 (uri);
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
			g_clear_error (&_inner_error0_);
			return;
		}
		_g_key_file_unref0 (file);
	}
	_g_free0 (_tmp18_);
	_g_object_unref0 (launcher_file);
	_g_free0 (basename);
	_g_object_unref0 (target_dir);
	_g_free0 (uri);
}

static glong
string_strnlen (gchar* str,
                glong maxlen)
{
	gchar* end = NULL;
	gchar* _tmp0_;
	gchar* _tmp1_;
	glong result = 0L;
	_tmp0_ = memchr (str, 0, (gsize) maxlen);
	end = _tmp0_;
	_tmp1_ = end;
	if (_tmp1_ == NULL) {
		result = maxlen;
		return result;
	} else {
		gchar* _tmp2_;
		_tmp2_ = end;
		result = (glong) (_tmp2_ - str);
		return result;
	}
}

static gchar*
string_substring (const gchar* self,
                  glong offset,
                  glong len)
{
	glong string_length = 0L;
	gboolean _tmp0_ = FALSE;
	gchar* _tmp3_;
	gchar* result = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	if (offset >= ((glong) 0)) {
		_tmp0_ = len >= ((glong) 0);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		string_length = string_strnlen ((gchar*) self, offset + len);
	} else {
		gint _tmp1_;
		gint _tmp2_;
		_tmp1_ = strlen (self);
		_tmp2_ = _tmp1_;
		string_length = (glong) _tmp2_;
	}
	if (offset < ((glong) 0)) {
		offset = string_length + offset;
		g_return_val_if_fail (offset >= ((glong) 0), NULL);
	} else {
		g_return_val_if_fail (offset <= string_length, NULL);
	}
	if (len < ((glong) 0)) {
		len = string_length - offset;
	}
	g_return_val_if_fail ((offset + len) <= string_length, NULL);
	_tmp3_ = g_strndup (((gchar*) self) + offset, (gsize) len);
	result = _tmp3_;
	return result;
}

static void
rocker_widgets_app_entry_remove_saved_item (RockerWidgetsAppEntry* self)
{
	gchar* uri = NULL;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	GFile* target_dir = NULL;
	GFile* saved_file = NULL;
	GFile* _tmp2_;
	gboolean is_valid = FALSE;
	gchar* basename = NULL;
	GFile* launcher_file = NULL;
	const gchar* _tmp7_;
	GFile* _tmp8_;
	gchar* _tmp9_ = NULL;
	GFile* _tmp10_;
	gchar* _tmp11_;
	gchar* _tmp13_;
	gchar* saveditem = NULL;
	GFile* _tmp14_;
	gchar* _tmp15_;
	gchar* _tmp16_;
	gchar* _tmp17_;
	gchar* _tmp18_;
	const gchar* _tmp19_;
	const gchar* _tmp20_;
	gint _tmp21_;
	gint _tmp22_;
	gchar* _tmp23_;
	gchar* _tmp24_;
	gchar* _tmp25_;
	gchar* _tmp26_;
	const gchar* _tmp27_;
	gchar* _tmp28_;
	gchar* _tmp29_;
	const gchar* _tmp30_;
	GFile* _tmp31_;
	GFile* _tmp32_;
	GError* _inner_error0_ = NULL;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->desktop_uri;
	_tmp1_ = g_strdup (_tmp0_);
	uri = _tmp1_;
	target_dir = NULL;
	saved_file = NULL;
	_tmp2_ = target_dir;
	if (_tmp2_ == NULL) {
		const gchar* _tmp3_;
		gchar* _tmp4_;
		gchar* _tmp5_;
		GFile* _tmp6_;
		_tmp3_ = g_get_home_dir ();
		_tmp4_ = g_strconcat (_tmp3_, "/.config/rocker/saved/", NULL);
		_tmp5_ = _tmp4_;
		_tmp6_ = g_file_new_for_path (_tmp5_);
		_g_object_unref0 (target_dir);
		target_dir = _tmp6_;
		_g_free0 (_tmp5_);
	}
	is_valid = FALSE;
	_tmp7_ = uri;
	_tmp8_ = g_file_new_for_uri (_tmp7_);
	launcher_file = _tmp8_;
	_tmp10_ = launcher_file;
	_tmp11_ = g_file_get_basename (_tmp10_);
	_tmp9_ = _tmp11_;
	if (_tmp9_ == NULL) {
		gchar* _tmp12_;
		_tmp12_ = g_strdup ("unknown");
		_g_free0 (_tmp9_);
		_tmp9_ = _tmp12_;
	}
	_tmp13_ = _tmp9_;
	_tmp9_ = NULL;
	_g_free0 (basename);
	basename = _tmp13_;
	_tmp14_ = target_dir;
	_tmp15_ = g_file_get_path (_tmp14_);
	_tmp16_ = _tmp15_;
	_tmp17_ = g_strconcat (_tmp16_, "/", NULL);
	_tmp18_ = _tmp17_;
	_tmp19_ = basename;
	_tmp20_ = basename;
	_tmp21_ = strlen (_tmp20_);
	_tmp22_ = _tmp21_;
	_tmp23_ = string_substring (_tmp19_, (glong) 0, (glong) (_tmp22_ - 8));
	_tmp24_ = _tmp23_;
	_tmp25_ = g_strdup_printf ("%s%s.saveditem", _tmp18_, _tmp24_);
	_tmp26_ = _tmp25_;
	_g_free0 (_tmp24_);
	_g_free0 (_tmp18_);
	_g_free0 (_tmp16_);
	saveditem = _tmp26_;
	_tmp27_ = saveditem;
	_tmp28_ = g_strconcat ("removing saved file: ", _tmp27_, NULL);
	_tmp29_ = _tmp28_;
	g_message ("AppEntry.vala:276: %s", _tmp29_);
	_g_free0 (_tmp29_);
	_tmp30_ = saveditem;
	_tmp31_ = g_file_new_for_path (_tmp30_);
	_g_object_unref0 (saved_file);
	saved_file = _tmp31_;
	_tmp32_ = saved_file;
	is_valid = g_file_query_exists (_tmp32_, NULL);
	if (is_valid) {
		{
			GFile* _tmp33_;
			GtkApplication* rocker_app = NULL;
			GApplication* _tmp34_;
			GtkApplication* _tmp35_;
			GtkApplication* _tmp36_;
			GtkWindow* _tmp37_;
			GtkWindow* _tmp38_;
			const gchar* _tmp39_;
			_tmp33_ = saved_file;
			g_file_delete (_tmp33_, NULL, &_inner_error0_);
			if (G_UNLIKELY (_inner_error0_ != NULL)) {
				goto __catch0_g_error;
			}
			_tmp34_ = g_application_get_default ();
			_tmp35_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp34_, gtk_application_get_type (), GtkApplication));
			rocker_app = _tmp35_;
			_tmp36_ = rocker_app;
			_tmp37_ = gtk_application_get_active_window (_tmp36_);
			_tmp38_ = _tmp37_;
			_tmp39_ = basename;
			rocker_rocker_view_add_saved (G_TYPE_CHECK_INSTANCE_CAST (_tmp38_, ROCKER_TYPE_ROCKER_VIEW, RockerRockerView), _tmp39_);
			_g_object_unref0 (rocker_app);
		}
		goto __finally0;
		__catch0_g_error:
		{
			GError* e = NULL;
			GError* _tmp40_;
			const gchar* _tmp41_;
			e = _inner_error0_;
			_inner_error0_ = NULL;
			_tmp40_ = e;
			_tmp41_ = _tmp40_->message;
			g_warning ("AppEntry.vala:288: %s", _tmp41_);
			_g_error_free0 (e);
		}
		__finally0:
		if (G_UNLIKELY (_inner_error0_ != NULL)) {
			_g_free0 (saveditem);
			_g_free0 (_tmp9_);
			_g_object_unref0 (launcher_file);
			_g_free0 (basename);
			_g_object_unref0 (saved_file);
			_g_object_unref0 (target_dir);
			_g_free0 (uri);
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error0_->message, g_quark_to_string (_inner_error0_->domain), _inner_error0_->code);
			g_clear_error (&_inner_error0_);
			return;
		}
	}
	_g_free0 (saveditem);
	_g_free0 (_tmp9_);
	_g_object_unref0 (launcher_file);
	_g_free0 (basename);
	_g_object_unref0 (saved_file);
	_g_object_unref0 (target_dir);
	_g_free0 (uri);
}

static void
rocker_widgets_app_entry_class_init (RockerWidgetsAppEntryClass * klass,
                                     gpointer klass_data)
{
	rocker_widgets_app_entry_parent_class = g_type_class_peek_parent (klass);
	g_type_class_adjust_private_offset (klass, &RockerWidgetsAppEntry_private_offset);
	((GtkWidgetClass *) klass)->get_preferred_width = (void (*) (GtkWidget*, gint*, gint*)) rocker_widgets_app_entry_real_get_preferred_width;
	((GtkWidgetClass *) klass)->get_preferred_height = (void (*) (GtkWidget*, gint*, gint*)) rocker_widgets_app_entry_real_get_preferred_height;
	G_OBJECT_CLASS (klass)->finalize = rocker_widgets_app_entry_finalize;
	rocker_widgets_app_entry_signals[ROCKER_WIDGETS_APP_ENTRY_APP_LAUNCHED_SIGNAL] = g_signal_new ("app-launched", ROCKER_WIDGETS_TYPE_APP_ENTRY, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
}

static void
rocker_widgets_app_entry_instance_init (RockerWidgetsAppEntry * self,
                                        gpointer klass)
{
	self->priv = rocker_widgets_app_entry_get_instance_private (self);
	self->priv->dragging = FALSE;
}

static void
rocker_widgets_app_entry_finalize (GObject * obj)
{
	RockerWidgetsAppEntry * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, ROCKER_WIDGETS_TYPE_APP_ENTRY, RockerWidgetsAppEntry);
	_g_object_unref0 (self->app_label);
	_g_object_unref0 (self->priv->icon);
	_g_object_unref0 (self->priv->image);
	_g_free0 (self->desktop_uri);
	_g_free0 (self->exec_name);
	_g_free0 (self->app_name);
	_g_free0 (self->desktop_id);
	_g_free0 (self->desktop_path);
	_g_object_unref0 (self->launchers_dir);
	_g_object_unref0 (self->priv->application);
	_g_object_unref0 (self->priv->app_system);
	G_OBJECT_CLASS (rocker_widgets_app_entry_parent_class)->finalize (obj);
}

static GType
rocker_widgets_app_entry_get_type_once (void)
{
	static const GTypeInfo g_define_type_info = { sizeof (RockerWidgetsAppEntryClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) rocker_widgets_app_entry_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (RockerWidgetsAppEntry), 0, (GInstanceInitFunc) rocker_widgets_app_entry_instance_init, NULL };
	GType rocker_widgets_app_entry_type_id;
	rocker_widgets_app_entry_type_id = g_type_register_static (gtk_button_get_type (), "RockerWidgetsAppEntry", &g_define_type_info, 0);
	RockerWidgetsAppEntry_private_offset = g_type_add_instance_private (rocker_widgets_app_entry_type_id, sizeof (RockerWidgetsAppEntryPrivate));
	return rocker_widgets_app_entry_type_id;
}

GType
rocker_widgets_app_entry_get_type (void)
{
	static volatile gsize rocker_widgets_app_entry_type_id__volatile = 0;
	if (g_once_init_enter (&rocker_widgets_app_entry_type_id__volatile)) {
		GType rocker_widgets_app_entry_type_id;
		rocker_widgets_app_entry_type_id = rocker_widgets_app_entry_get_type_once ();
		g_once_init_leave (&rocker_widgets_app_entry_type_id__volatile, rocker_widgets_app_entry_type_id);
	}
	return rocker_widgets_app_entry_type_id__volatile;
}

static void
_vala_array_destroy (gpointer array,
                     gint array_length,
                     GDestroyNotify destroy_func)
{
	if ((array != NULL) && (destroy_func != NULL)) {
		gint i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}

static void
_vala_array_free (gpointer array,
                  gint array_length,
                  GDestroyNotify destroy_func)
{
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}

static gint
_vala_array_length (gpointer array)
{
	gint length;
	length = 0;
	if (array) {
		while (((gpointer*) array)[length]) {
			length++;
		}
	}
	return length;
}

